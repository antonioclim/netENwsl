# ═══════════════════════════════════════════════════════════════════════════════
# formative/quiz.yaml — Week 5: IP Addressing, Subnetting and VLSM
# NETWORKING Laboratory — ASE-CSIE Bucharest
# ═══════════════════════════════════════════════════════════════════════════════
#
# Format: YAML executable for self-assessment
# Runner: python formative/run_quiz.py [--random] [--limit N]
# Export: python formative/export_to_lms.py --format moodle
#
# Bloom Taxonomy Coverage:
#   - Remember (L1): q01, q02
#   - Understand (L2): q03, q04
#   - Apply (L3): q05, q06, q09, q10
#   - Analyse (L4): q07, q08
#   - Evaluate (L5): q11
#   - Create (L6): q12
#
# ═══════════════════════════════════════════════════════════════════════════════

metadata:
  week: 5
  topic: "Network Layer – IP Addressing, Subnetting and VLSM"
  version: "1.1.0"
  last_updated: "2026-01-24"
  estimated_time_minutes: 15
  passing_score: 70
  
  learning_objectives:
    - id: LO1
      description: "Identify the role and functions of the network layer"
    - id: LO2
      description: "Explain IPv4 and IPv6 header formats and addressing schemes"
    - id: LO3
      description: "Calculate network addresses, broadcast addresses and host ranges"
    - id: LO4
      description: "Apply FLSM subnetting to partition networks"
    - id: LO5
      description: "Design VLSM allocation schemes"
    - id: LO6
      description: "Evaluate efficiency of addressing schemes"

  bloom_coverage:
    remember: 2
    understand: 2
    apply: 4
    analyse: 2
    evaluate: 1
    create: 1

  references:
    - "RFC 791 – Internet Protocol (IPv4)"
    - "RFC 8200 – Internet Protocol Version 6 (IPv6)"
    - "RFC 1918 – Address Allocation for Private Internets"
    - "RFC 4291 – IP Version 6 Addressing Architecture"
    - "RFC 5952 – A Recommendation for IPv6 Address Text Representation"
    - "RFC 1878 – Variable Length Subnet Table For IPv4"

  lms_export:
    moodle_category: "Week 5 - Network Layer"
    canvas_module: "Module 5: IP Addressing"
    question_bank: true

# ═══════════════════════════════════════════════════════════════════════════════
# QUESTIONS
# ═══════════════════════════════════════════════════════════════════════════════

questions:
  # BLOOM LEVEL 1: REMEMBER
  - id: q01
    type: multiple_choice
    lo_ref: LO1
    bloom_level: remember
    difficulty: basic
    points: 1
    stem: "Which OSI layer is responsible for logical addressing and routing?"
    options:
      a: "Data Link Layer (Layer 2)"
      b: "Network Layer (Layer 3)"
      c: "Transport Layer (Layer 4)"
      d: "Session Layer (Layer 5)"
    correct: b
    explanation: |
      The Network Layer (Layer 3) handles logical addressing (IP addresses) 
      and routing decisions. The Data Link Layer uses MAC addresses (physical)
      whilst the Transport Layer uses port numbers.
    misconception_ref: "docs/misconceptions.md#misconception-0"

  - id: q02
    type: multiple_choice
    lo_ref: LO2
    bloom_level: remember
    difficulty: basic
    points: 1
    stem: "What is the size of an IPv4 address in bits?"
    options:
      a: "16 bits"
      b: "32 bits"
      c: "64 bits"
      d: "128 bits"
    correct: b
    explanation: |
      IPv4 addresses are 32 bits (4 octets × 8 bits each).
      IPv6 addresses are 128 bits (8 groups × 16 bits each).

  # BLOOM LEVEL 2: UNDERSTAND
  - id: q03
    type: multiple_choice
    lo_ref: LO3
    bloom_level: understand
    difficulty: intermediate
    points: 2
    stem: "Why does a /26 network have 62 usable host addresses instead of 64?"
    options:
      a: "Two addresses are reserved for DNS servers"
      b: "Two addresses are reserved for network and broadcast"
      c: "Two addresses are reserved for the gateway"
      d: "The calculation is wrong; /26 should have 64 usable hosts"
    correct: b
    explanation: |
      Formula: Usable hosts = 2^(32-prefix) - 2
      The subtraction of 2 accounts for network address and broadcast address.
    misconception_ref: "docs/misconceptions.md#misconception-1"
    verification_cmd: "python3 -c \"print(2**(32-26) - 2)\""

  - id: q04
    type: fill_blank
    lo_ref: LO3
    bloom_level: understand
    difficulty: intermediate
    points: 2
    stem: "The broadcast address for network 192.168.1.64/26 is 192.168.1.___"
    correct: ["127"]
    hint: "Broadcast = Network address + Block size - 1. Block size for /26 = 64."
    explanation: |
      Step-by-step: Network + Block - 1 = 64 + 64 - 1 = 127

  # BLOOM LEVEL 3: APPLY
  - id: q05
    type: multiple_choice
    lo_ref: LO3
    bloom_level: apply
    difficulty: intermediate
    points: 2
    stem: "Given IP address 172.16.45.67/20, what is the network address?"
    options:
      a: "172.16.45.0"
      b: "172.16.32.0"
      c: "172.16.0.0"
      d: "172.16.45.64"
    correct: b
    explanation: |
      /20 means 20 network bits. The third octet (45) becomes 32 when masked.
    misconception_ref: "docs/misconceptions.md#misconception-3"

  - id: q06
    type: multiple_choice
    lo_ref: LO4
    bloom_level: apply
    difficulty: intermediate
    points: 2
    stem: "You need to split 192.168.100.0/24 into 8 equal subnets using FLSM. What will be the new prefix length?"
    options:
      a: "/25"
      b: "/26"
      c: "/27"
      d: "/28"
    correct: c
    explanation: |
      For 8 subnets: ceil(log2(8)) = 3 bits. New prefix = 24 + 3 = /27

  - id: q09
    type: fill_blank
    lo_ref: LO3
    bloom_level: apply
    difficulty: intermediate
    points: 2
    stem: "A /28 network has ___ usable host addresses."
    correct: ["14"]
    explanation: "Host bits = 32 - 28 = 4. Usable = 2^4 - 2 = 14"

  - id: q10
    type: fill_blank
    lo_ref: LO5
    bloom_level: apply
    difficulty: advanced
    points: 3
    stem: "To accommodate exactly 60 hosts, the minimum prefix length needed is /___"
    correct: ["26"]
    explanation: "Need 62 total addresses. 2^6 = 64 >= 62. Prefix = 32 - 6 = /26"

  # BLOOM LEVEL 4: ANALYSE
  - id: q07
    type: multiple_choice
    lo_ref: LO5
    bloom_level: analyse
    difficulty: advanced
    points: 3
    stem: "For VLSM allocation from 10.0.0.0/24 with requirements: Dept A: 100 hosts, Dept B: 50 hosts, Dept C: 20 hosts, Dept D: 2 hosts. In what order should subnets be allocated?"
    options:
      a: "A, B, C, D (as listed)"
      b: "D, C, B, A (smallest first)"
      c: "A, B, C, D (largest first)"
      d: "Order does not matter for VLSM"
    correct: c
    explanation: "VLSM MUST allocate largest requirements first to prevent fragmentation."
    misconception_ref: "docs/misconceptions.md#misconception-6"

  - id: q08
    type: multiple_choice
    lo_ref: LO2
    bloom_level: analyse
    difficulty: advanced
    points: 3
    stem: "Which of the following IPv6 addresses is INVALID?"
    options:
      a: "2001:db8::85a3:0:0:7334"
      b: "2001:db8::85a3::7334"
      c: "2001:0db8:0000:0000:0085:0000:0000:7334"
      d: "::1"
    correct: b
    explanation: "The :: notation can only appear ONCE per IPv6 address (RFC 5952)."
    misconception_ref: "docs/misconceptions.md#misconception-8"

  # BLOOM LEVEL 5: EVALUATE
  - id: q11
    type: multiple_choice
    lo_ref: LO6
    bloom_level: evaluate
    difficulty: advanced
    points: 3
    stem: |
      A network administrator designed two VLSM schemes for 10.0.0.0/24:
      
      Scheme A: 100 hosts → /25, 50 hosts → /26, 20 hosts → /27, 2 hosts → /30
      Scheme B: 100 hosts → /24, 50 hosts → /25, 20 hosts → /26, 2 hosts → /28
      
      Which scheme is MORE EFFICIENT and why?
    options:
      a: "Scheme A — uses tighter prefixes matching actual requirements"
      b: "Scheme B — provides more room for growth"
      c: "Both are equally efficient"
      d: "Neither works — insufficient address space"
    correct: a
    explanation: "Scheme A is more efficient. Scheme B's /24 alone uses all addresses."

  # BLOOM LEVEL 6: CREATE
  - id: q12
    type: open_response
    lo_ref: LO5
    bloom_level: create
    difficulty: advanced
    points: 4
    stem: |
      Design a VLSM allocation for 172.16.50.0/24 with these requirements:
      - Engineering: 60 workstations
      - Sales: 25 workstations  
      - Management: 10 workstations
      - Server VLAN: 5 servers
      - Point-to-point link: 2 routers
      
      List each subnet with: Name, Network Address, Prefix, Usable Range, Broadcast
    rubric:
      - criterion: "Correct allocation order (largest first)"
        points: 1
      - criterion: "Optimal prefix selection for each requirement"
        points: 1
      - criterion: "No overlapping subnets"
        points: 1
      - criterion: "Complete information for each subnet"
        points: 1
    sample_answer: |
      1. Engineering: 172.16.50.0/26 (62 usable: .1-.62, broadcast .63)
      2. Sales: 172.16.50.64/27 (30 usable: .65-.94, broadcast .95)
      3. Management: 172.16.50.96/28 (14 usable: .97-.110, broadcast .111)
      4. Server VLAN: 172.16.50.112/29 (6 usable: .113-.118, broadcast .119)
      5. P2P Link: 172.16.50.120/30 (2 usable: .121-.122, broadcast .123)

# ═══════════════════════════════════════════════════════════════════════════════
# SCORING CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

scoring:
  total_possible: 28
  grade_thresholds:
    A: 90
    B: 80
    C: 70
    D: 60
    F: 0

feedback:
  score_90_100: "Excellent! You have mastered Week 5 concepts."
  score_70_89: "Good understanding. Review misconceptions for topics you missed."
  score_50_69: "Needs improvement. Complete code tracing exercises before retaking."
  score_below_50: "Please review the theory summary and lecture materials."
