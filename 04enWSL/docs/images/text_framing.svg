<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 650 200">
  <defs>
    <style>
      .length { fill: #2ecc71; stroke: #27ae60; stroke-width: 2; }
      .payload { fill: #3498db; stroke: #2980b9; stroke-width: 2; }
      .delim { fill: #9b59b6; stroke: #8e44ad; stroke-width: 2; }
      .label { font-family: monospace; font-size: 12px; fill: #2c3e50; }
      .size { font-family: sans-serif; font-size: 10px; fill: #7f8c8d; }
      .title { font-family: sans-serif; font-size: 14px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: sans-serif; font-size: 11px; fill: #7f8c8d; }
      .arrow { stroke: #2c3e50; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2c3e50"/>
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="325" y="25" class="title" text-anchor="middle">TEXT Protocol: Length-Prefix Framing</text>
  
  <!-- Frame 1 -->
  <text x="50" y="55" class="subtitle">Frame structure:</text>
  <rect x="50" y="65" width="80" height="40" class="length" rx="3"/>
  <text x="90" y="90" class="label" text-anchor="middle">Length</text>
  
  <rect x="130" y="65" width="30" height="40" class="delim" rx="3"/>
  <text x="145" y="90" class="label" text-anchor="middle">SP</text>
  
  <rect x="160" y="65" width="200" height="40" class="payload" rx="3"/>
  <text x="260" y="90" class="label" text-anchor="middle">Payload (N bytes)</text>
  
  <!-- Example -->
  <text x="50" y="135" class="subtitle">Example: "SET key value" (13 bytes)</text>
  
  <rect x="50" y="145" width="50" height="35" class="length" rx="3"/>
  <text x="75" y="168" class="label" text-anchor="middle">13</text>
  
  <rect x="100" y="145" width="20" height="35" class="delim" rx="3"/>
  <text x="110" y="168" class="label" text-anchor="middle"> </text>
  
  <rect x="120" y="145" width="180" height="35" class="payload" rx="3"/>
  <text x="210" y="168" class="label" text-anchor="middle">SET key value</text>
  
  <!-- Wire format -->
  <text x="350" y="135" class="subtitle">On the wire (bytes):</text>
  <rect x="350" y="145" width="250" height="35" fill="#ecf0f1" stroke="#bdc3c7" stroke-width="1" rx="3"/>
  <text x="475" y="168" class="label" text-anchor="middle">31 33 20 53 45 54 20 6b 65 79 ...</text>
  
  <!-- Legend -->
  <rect x="50" y="190" width="12" height="12" class="length" rx="2"/>
  <text x="67" y="200" class="size">Length field (ASCII digits)</text>
  
  <rect x="220" y="190" width="12" height="12" class="delim" rx="2"/>
  <text x="237" y="200" class="size">Space delimiter</text>
  
  <rect x="350" y="190" width="12" height="12" class="payload" rx="2"/>
  <text x="367" y="200" class="size">Payload (UTF-8)</text>
</svg>
