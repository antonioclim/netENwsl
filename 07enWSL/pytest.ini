# ============================================================================
# pytest.ini — Week 7 Laboratory Test Configuration
# NETWORKING class - ASE, Informatics | by ing. dr. Antonio Clim
# ============================================================================
#
# Usage:
#   pytest                      # Run all tests
#   pytest -v                   # Verbose output
#   pytest tests/smoke_test.py  # Run specific file
#   pytest -k "tcp"             # Run tests matching pattern
#   pytest --tb=short           # Short tracebacks
#
# ============================================================================

[pytest]
# ─── TEST DISCOVERY ──────────────────────────────────────────────────────────
testpaths = tests
python_files = test_*.py smoke_test.py
python_classes = Test*
python_functions = test_*

# ─── OUTPUT CONFIGURATION ────────────────────────────────────────────────────
# -v: verbose
# --tb=short: shorter tracebacks
# -ra: show summary of all except passed
addopts = -v --tb=short -ra

# ─── TIMEOUT CONFIGURATION ───────────────────────────────────────────────────
# Prevent tests from hanging indefinitely (requires pytest-timeout)
# timeout = 30

# ─── MARKERS ─────────────────────────────────────────────────────────────────
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    network: marks tests requiring network access
    docker: marks tests requiring Docker running
    exercise1: marks tests for Exercise 1
    exercise2: marks tests for Exercise 2
    exercise3: marks tests for Exercise 3
    exercise4: marks tests for Exercise 4
    exercise5: marks tests for Exercise 5

# ─── LOGGING ─────────────────────────────────────────────────────────────────
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)s] %(message)s
log_cli_date_format = %H:%M:%S

# ─── WARNINGS ────────────────────────────────────────────────────────────────
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# ─── COVERAGE (if pytest-cov installed) ──────────────────────────────────────
# Uncomment to enable coverage reporting
# addopts = --cov=src --cov=scripts --cov-report=term-missing

# ============================================================================
# Quick Reference:
#
# Run all tests:
#   pytest
#
# Run with coverage:
#   pytest --cov=src --cov-report=html
#
# Run specific exercise tests:
#   pytest -m exercise1
#
# Run excluding slow tests:
#   pytest -m "not slow"
#
# Run only Docker-dependent tests:
#   pytest -m docker
#
# Stop on first failure:
#   pytest -x
#
# Run last failed tests:
#   pytest --lf
#
# ============================================================================
