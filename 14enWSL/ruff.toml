# ═══════════════════════════════════════════════════════════════════════════════
# Ruff Configuration — Week 14 Laboratory
# ═══════════════════════════════════════════════════════════════════════════════
# NETWORKING class — ASE, CSIE | Computer Networks Laboratory
# by ing. dr. Antonio Clim
#
# Ruff is a fast Python linter that replaces flake8, isort and pyupgrade.
# Documentation: https://docs.astral.sh/ruff/
# Version: 2.1.0
# ═══════════════════════════════════════════════════════════════════════════════

# Target Python version
target-version = "py310"

# Line length (matches Black default)
line-length = 100

# Directories to include
include = ["*.py"]

# Directories to exclude
exclude = [
    ".git",
    ".mypy_cache",
    ".pytest_cache",
    ".ruff_cache",
    "__pycache__",
    "*.egg-info",
    "build",
    "dist",
    "venv",
    ".venv",
    "node_modules",
]

# ═══════════════════════════════════════════════════════════════════════════════
# LINTING RULES
# ═══════════════════════════════════════════════════════════════════════════════

[lint]
# Enable rule categories
select = [
    "E",      # pycodestyle errors
    "W",      # pycodestyle warnings
    "F",      # Pyflakes
    "I",      # isort
    "B",      # flake8-bugbear
    "C4",     # flake8-comprehensions
    "UP",     # pyupgrade
    "SIM",    # flake8-simplify
    "TCH",    # flake8-type-checking
    "RUF",    # Ruff-specific rules
]

# Ignore specific rules
ignore = [
    "E501",   # Line too long (handled by formatter)
    "B008",   # Function call in default argument (common pattern)
    "B905",   # zip without strict (Python 3.10+ only)
    "SIM108", # Ternary operator (readability preference)
]

# Allow autofix for all enabled rules
fixable = ["ALL"]
unfixable = []

# ═══════════════════════════════════════════════════════════════════════════════
# ISORT CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════════

[lint.isort]
# Force single line imports
force-single-line = false

# Known first-party modules
known-first-party = ["src", "scripts", "formative", "tests"]

# Section order
section-order = [
    "future",
    "standard-library",
    "third-party",
    "first-party",
    "local-folder",
]

# ═══════════════════════════════════════════════════════════════════════════════
# PER-FILE IGNORES
# ═══════════════════════════════════════════════════════════════════════════════

[lint.per-file-ignores]
# Tests can use assert and have longer lines
"tests/*.py" = ["S101", "E501"]

# Init files can have unused imports
"__init__.py" = ["F401"]

# ═══════════════════════════════════════════════════════════════════════════════
# FORMATTING
# ═══════════════════════════════════════════════════════════════════════════════

[format]
# Use double quotes
quote-style = "double"

# Indent with spaces
indent-style = "space"

# Unix line endings
line-ending = "lf"

# Format docstrings
docstring-code-format = true
