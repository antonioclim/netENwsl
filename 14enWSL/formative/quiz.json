{
  "metadata": {
    "week": 14,
    "topic": "Integrated Recap and Project Evaluation",
    "version": "2.0.0",
    "author": "ing. dr. Antonio Clim",
    "institution": "ASE Bucharest, CSIE",
    "course": "Computer Networks",
    "language": "en-GB",
    "estimated_time_minutes": 25,
    "passing_score_percent": 70,
    "total_points": 42,
    "question_count": 15,
    "bloom_coverage": {
      "Remember": {"count": 3, "points": 3},
      "Understand": {"count": 3, "points": 6},
      "Apply": {"count": 2, "points": 4},
      "Analyse": {"count": 2, "points": 6},
      "Evaluate": {"count": 2, "points": 8},
      "Create": {"count": 3, "points": 15}
    },
    "learning_objectives": {
      "LO1": "Recall OSI and TCP/IP layered architectures",
      "LO2": "Explain reverse proxies and load balancers",
      "LO3": "Implement multi-container Docker environment",
      "LO4": "Analyse packet captures to trace HTTP flows",
      "LO5": "Design verification strategies for network services",
      "LO6": "Evaluate system behaviour under various conditions"
    },
    "moodle_category": "Computer Networks / Week 14",
    "canvas_quiz_type": "practice_quiz"
  },
  "questions": [
    {
      "id": "q01",
      "type": "multiple_choice",
      "bloom_level": "Remember",
      "lo_ref": "LO1",
      "difficulty": "basic",
      "points": 1,
      "stem": "Which OSI layer is responsible for logical addressing (IP)?",
      "options": {
        "a": "Data Link (Layer 2)",
        "b": "Network (Layer 3)",
        "c": "Transport (Layer 4)",
        "d": "Application (Layer 7)"
      },
      "correct": "b",
      "explanation": "The Network Layer (Layer 3) manages IP addressing and packet routing between different networks. Data Link (L2) uses MAC addresses, Transport (L4) uses ports, Application (L7) handles application data.",
      "hint": "Consider what information a router uses to decide where to send a packet."
    },
    {
      "id": "q02",
      "type": "multiple_choice",
      "bloom_level": "Remember",
      "lo_ref": "LO1",
      "difficulty": "basic",
      "points": 1,
      "stem": "What Protocol Data Unit (PDU) does TCP use at Layer 4?",
      "options": {
        "a": "Frame",
        "b": "Packet",
        "c": "Segment",
        "d": "Datagram"
      },
      "correct": "c",
      "explanation": "Each OSI layer has its own PDU: Layer 2 uses Frame, Layer 3 uses Packet, Layer 4 uses Segment (TCP) or Datagram (UDP), Layer 7 uses Data/Message.",
      "hint": "TCP = Transport Control Protocol — which layer?"
    },
    {
      "id": "q03",
      "type": "multiple_choice",
      "bloom_level": "Remember",
      "lo_ref": "LO1",
      "difficulty": "basic",
      "points": 1,
      "stem": "What is the standard port for HTTP (not HTTPS)?",
      "options": {
        "a": "22",
        "b": "53",
        "c": "80",
        "d": "443"
      },
      "correct": "c",
      "explanation": "Common standard ports: 22 (SSH), 53 (DNS), 80 (HTTP), 443 (HTTPS).",
      "hint": "HTTP = HyperText Transfer Protocol. Think of the number 8..."
    },
    {
      "id": "q04",
      "type": "multiple_choice",
      "bloom_level": "Understand",
      "lo_ref": "LO2",
      "difficulty": "intermediate",
      "points": 2,
      "stem": "A round-robin load balancer has 2 backends (app1, app2). If you send 4 consecutive requests, what is the expected distribution?",
      "options": {
        "a": "All 4 to app1 (sticky session)",
        "b": "app1, app2, app1, app2 (deterministic alternation)",
        "c": "Random distribution (could be anything)",
        "d": "First 2 to app1, next 2 to app2 (batch)"
      },
      "correct": "b",
      "explanation": "Round-robin is a DETERMINISTIC and SEQUENTIAL algorithm. Requests go in order: app1, app2, app1, app2. It is NOT random!",
      "hint": "Round = circle, Robin = in turn. Not 'Random-robin'!"
    },
    {
      "id": "q05",
      "type": "multiple_choice",
      "bloom_level": "Understand",
      "lo_ref": "LO3",
      "difficulty": "intermediate",
      "points": 2,
      "stem": "In docker-compose.yml you find: ports: \"8080:80\". What does this configuration mean?",
      "options": {
        "a": "Container listens on port 8080, host on 80",
        "b": "Host exposes port 8080, which maps to port 80 in the container",
        "c": "Both ports are identical (8080 = 80)",
        "d": "Host listens on 80, container on 8080"
      },
      "correct": "b",
      "explanation": "Docker port mapping syntax is HOST:CONTAINER. '8080:80' means access http://localhost:8080 from outside, service listens on :80 inside.",
      "hint": "HOST:CONTAINER — what is on the left is for the outside."
    },
    {
      "id": "q06",
      "type": "multiple_choice",
      "bloom_level": "Understand",
      "lo_ref": "LO1",
      "difficulty": "intermediate",
      "points": 2,
      "stem": "What is the correct sequence of flags in the TCP three-way handshake?",
      "options": {
        "a": "SYN → ACK → SYN-ACK",
        "b": "SYN → SYN-ACK → ACK",
        "c": "ACK → SYN → SYN-ACK",
        "d": "SYN → SYN → ACK"
      },
      "correct": "b",
      "explanation": "TCP Three-Way Handshake: Client sends SYN, Server responds SYN-ACK, Client sends ACK. Connection established.",
      "hint": "Both sides need to synchronise — hence SYN from both."
    },
    {
      "id": "q07",
      "type": "fill_blank",
      "bloom_level": "Apply",
      "lo_ref": "LO3",
      "difficulty": "intermediate",
      "points": 2,
      "stem": "To see all Docker containers currently running, the complete command is: docker ___",
      "correct": ["ps", "container ls", "container list"],
      "case_sensitive": false,
      "explanation": "Equivalent commands: docker ps (traditional), docker container ls (new, explicit), docker container list (alias).",
      "hint": "ps = process status (traditional Unix abbreviation)"
    },
    {
      "id": "q08",
      "type": "fill_blank",
      "bloom_level": "Apply",
      "lo_ref": "LO4",
      "difficulty": "intermediate",
      "points": 2,
      "stem": "In Wireshark, to filter only HTTP packets with GET method, the correct display filter is: http.request.method == \"___\"",
      "correct": ["GET"],
      "case_sensitive": true,
      "explanation": "Wireshark display filters for HTTP: http.request.method == \"GET\" for GET requests. Values are case-sensitive!",
      "hint": "HTTP methods are always UPPERCASE: GET, POST, PUT, DELETE..."
    },
    {
      "id": "q09",
      "type": "multiple_choice",
      "bloom_level": "Analyse",
      "lo_ref": "LO4",
      "difficulty": "advanced",
      "points": 3,
      "stem": "In Wireshark, you capture traffic and observe: Packet 1: [SYN] 192.168.1.10:54321 → 10.0.0.5:8080, Packet 2: [RST, ACK] 10.0.0.5:8080 → 192.168.1.10:54321. What does this sequence indicate?",
      "options": {
        "a": "Connection established successfully, data transfer follows",
        "b": "Port 8080 on server 10.0.0.5 is closed or no service exists",
        "c": "Network timeout — packets were lost",
        "d": "Firewall blocked the connection silently (drop)"
      },
      "correct": "b",
      "explanation": "RST (Reset) immediately after SYN indicates the destination port is CLOSED and no service is listening. Firewall DROP would result in timeout (no response).",
      "hint": "RST = Reset = 'Nobody here!'"
    },
    {
      "id": "q10",
      "type": "multiple_choice",
      "bloom_level": "Analyse",
      "lo_ref": "LO6",
      "difficulty": "advanced",
      "points": 3,
      "stem": "You access http://localhost:8080/ and receive: HTTP/1.1 502 Bad Gateway, X-Error: upstream connection failed. What is the most likely cause and first diagnostic step?",
      "options": {
        "a": "Client sent a malformed request → check the request",
        "b": "Backends are down or not responding → check docker ps and health",
        "c": "Load balancer is overloaded → check CPU/memory",
        "d": "SSL certificate has expired → check certificates"
      },
      "correct": "b",
      "explanation": "HTTP 502 Bad Gateway means the proxy could NOT obtain a valid response from upstream server. First step: check if backends are running with docker ps.",
      "hint": "502 = 'I tried to ask the backend, but it did not respond'"
    },
    {
      "id": "q11",
      "type": "multiple_choice",
      "bloom_level": "Evaluate",
      "lo_ref": "LO6",
      "difficulty": "advanced",
      "points": 4,
      "stem": "You implemented a round-robin load balancer with 3 backends. After 1 hour, you observe: app1: 45%, app2: 35%, app3: 20%. What is the most likely cause?",
      "options": {
        "a": "The round-robin algorithm is defective and needs replacement",
        "b": "app3 was periodically unavailable and LB removed it from rotation",
        "c": "Clients prefer app1 and app2 due to lower latency",
        "d": "Round-robin does not guarantee equal distribution over time"
      },
      "correct": "b",
      "explanation": "Round-robin GUARANTEES equal distribution if all backends are available. app3 at 20% suggests it was down ~40% of the time.",
      "hint": "Round-robin is deterministic. If distribution is unequal, what changed?"
    },
    {
      "id": "q12",
      "type": "multiple_choice",
      "bloom_level": "Evaluate",
      "lo_ref": "LO5",
      "difficulty": "advanced",
      "points": 4,
      "stem": "Diagnosing a network problem: (1) curl timeout after 30s, (2) docker ps shows all healthy, (3) ping to LB succeeds, (4) LB logs show 'upstream connection refused'. What is the problem?",
      "options": {
        "a": "Load balancer is not starting — needs restart",
        "b": "Problem is with backends: either not listening or wrong port",
        "c": "Firewall is blocking HTTP traffic",
        "d": "DNS resolution failure in Docker network"
      },
      "correct": "b",
      "explanation": "'Connection refused' means backend receives SYN but responds with RST — nobody is listening on that port. Ping works but application port is closed.",
      "hint": "Connection refused = port closed, not firewall (which would timeout)"
    },
    {
      "id": "q13",
      "type": "design_task",
      "bloom_level": "Create",
      "lo_ref": "LO5",
      "difficulty": "expert",
      "points": 5,
      "stem": "Design an automated test that verifies the load balancer distributes traffic correctly. Requirements: (1) deterministic, (2) verifies distribution not just connectivity, (3) reports which backend handled each request.",
      "format": "essay",
      "rubric": {
        "5": "Correct completion + design decisions explanation",
        "4": "Correct completion without explanation",
        "3": "2 of 3 requirements met",
        "2": "1 of 3 requirements met",
        "0": "Incorrect or empty"
      },
      "model_answer": "Create function that sends N requests (multiple of backend count), extracts backend name from response, builds list of results, compares against expected round-robin sequence."
    },
    {
      "id": "q14",
      "type": "architecture_design",
      "bloom_level": "Create",
      "lo_ref": "LO3",
      "difficulty": "expert",
      "points": 5,
      "stem": "Design a docker-compose.yml extension adding: (1) third backend app3 on 172.20.0.4, (2) monitoring service on both networks, (3) network isolation where monitor sees all but apps cannot see each other.",
      "format": "essay",
      "rubric": {
        "5": "All 3 requirements met with correct configuration",
        "4": "2 of 3 requirements met",
        "3": "1 of 3 requirements met",
        "2": "Partial solution with errors",
        "0": "Incorrect or empty"
      },
      "model_answer": "app3 with ipv4_address 172.20.0.4, monitor on backend_net and frontend_net, isolation via separate networks for each app."
    },
    {
      "id": "q15",
      "type": "troubleshooting_design",
      "bloom_level": "Create",
      "lo_ref": "LO5",
      "difficulty": "expert",
      "points": 5,
      "stem": "Create a troubleshooting checklist for 'HTTP requests intermittently return 502 Bad Gateway'. Requirements: minimum 5 steps, each with concrete command, logical order, include result interpretation.",
      "format": "essay",
      "correct_elements": [
        "Check container status: docker ps",
        "Check backend health: curl localhost:8001/health",
        "Check LB logs: docker logs week14_lb",
        "Check network: docker exec week14_lb ping app1",
        "Check backend logs: docker logs week14_app1",
        "Check resources: docker stats"
      ],
      "rubric": {
        "5": "5+ correct steps, logically ordered, with interpretations",
        "4": "5 correct steps but suboptimal order",
        "3": "3-4 correct steps",
        "2": "1-2 correct steps",
        "0": "Incorrect or missing steps"
      }
    }
  ],
  "scoring": {
    "total_points": 42,
    "passing_threshold": 29,
    "grade_boundaries": {
      "A_plus": {"min_points": 40, "min_percent": 95, "label": "Excellent"},
      "A": {"min_points": 36, "min_percent": 85, "label": "Very Good"},
      "B": {"min_points": 32, "min_percent": 75, "label": "Good"},
      "C": {"min_points": 29, "min_percent": 70, "label": "Satisfactory"},
      "D": {"min_points": 25, "min_percent": 60, "label": "Sufficient"},
      "F": {"min_points": 0, "min_percent": 0, "label": "Insufficient"}
    }
  },
  "export": {
    "moodle": {
      "category": "Computer Networks / Week 14",
      "shuffle_answers": true,
      "penalty_factor": 0.25
    },
    "canvas": {
      "points_possible": 42,
      "quiz_type": "practice_quiz",
      "time_limit": 25,
      "allowed_attempts": 3
    }
  }
}
