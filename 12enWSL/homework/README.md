# üìù Homework ‚Äî Week 12: Email Protocols and Remote Procedure Calls

> Computer Networks ‚Äî ASE, CSIE | by ing. dr. Antonio Clim

## Overview

This week's homework covers SMTP client implementation and RPC protocol comparison, bridging application-layer protocols with practical performance analysis.

## Assignments

| File | Topic | Difficulty | Est. Time |
|------|-------|------------|-----------|
| `hw_12_01_smtp_client.py` | SMTP Client Implementation | ‚≠ê‚≠ê Intermediate | 60-75 min |
| `hw_12_02_rpc_comparison.py` | RPC Protocol Comparison and Benchmarking | ‚≠ê‚≠ê‚≠ê Advanced | 75-90 min |

## Assignment Details

### hw_12_01_smtp_client.py

Implement a basic SMTP client following RFC 5321.

**Learning Objectives:**
- Understand SMTP command-response protocol
- Implement EHLO, MAIL FROM, RCPT TO, DATA sequence
- Handle SMTP response codes correctly
- Format email messages with proper headers

**Key Skills:**
- Socket programming
- Protocol implementation
- Error handling

**SMTP Commands Covered:**
- `EHLO` ‚Äî Client identification
- `MAIL FROM` ‚Äî Sender specification
- `RCPT TO` ‚Äî Recipient specification
- `DATA` ‚Äî Message content transfer
- `QUIT` ‚Äî Session termination

### hw_12_02_rpc_comparison.py

Compare XML-RPC, JSON-RPC, and gRPC protocols through analysis and benchmarking.

**Learning Objectives:**
- Understand trade-offs between RPC protocols
- Analyse payload size differences
- Measure and compare performance characteristics
- Select appropriate protocols for different use cases

**Key Skills:**
- Protocol analysis
- Performance benchmarking
- Technology selection criteria

**Protocols Compared:**
| Protocol | Encoding | Transport | Best For |
|----------|----------|-----------|----------|
| XML-RPC | XML | HTTP | Legacy integration |
| JSON-RPC | JSON | HTTP | Web APIs, debugging |
| gRPC | Protocol Buffers | HTTP/2 | Microservices |

## Prerequisites

Before starting, check that you have completed:
- Week 12 lab exercises
- Understanding of application-layer protocols
- Basic socket programming knowledge

For SMTP exercise:
- Lab SMTP server should be running (port 1025)

## Anti-AI Evidence Pack (required)

For this week, your submission must include a short evidence pack that proves you have
interacted with the running services rather than producing a purely synthetic report.

You will submit:

- at least one capture file (PCAP or PCAPNG)
- an evidence JSON file generated by the kit

The capture must contain:

- the unique SMTP subject token on traffic involving port 1025
- the unique RPC token on traffic involving ports 6200 (JSON-RPC) and 6201 (XML-RPC)

### Suggested workflow

From the Week 12 folder:

1. Generate a challenge:

   `make anti-ai-challenge STUDENT_ID=YOUR_ID`

2. Start the lab services (Docker) in a separate terminal:

   `make lab-start`

3. Start a capture (requires admin privileges):

   `sudo python scripts/capture_traffic.py -o pcap/week12_YOUR_ID.pcap`

4. Run the required protocol interactions using the challenge file:

   `python scripts/anti_ai_run_week12_probes.py --challenge artifacts/anti_ai/challenge_YOUR_ID.yaml`

5. Stop the capture and generate the evidence JSON:

   `python scripts/anti_ai_generate_evidence.py --student-id YOUR_ID --pcap pcap/week12_YOUR_ID.pcap`

6. Validate locally before submitting:

   `python scripts/anti_ai_validate.py --challenge artifacts/anti_ai/challenge_YOUR_ID.yaml --evidence artifacts/anti_ai/evidence_YOUR_ID.json`

## Submission Guidelines

1. Complete all `TODO` sections
2. Successfully send a test email (SMTP exercise)
3. Run benchmarks and analyse results (RPC exercise)
4. Document your findings and conclusions

## Grading Rubric

| Criterion | Points |
|-----------|--------|
| Correct protocol implementation | 40% |
| Successful message/call completion | 25% |
| Analysis quality and insights | 20% |
| Code quality and documentation | 15% |

## Tips

### SMTP Exercise
- Test with the lab's local SMTP server first
- Pay attention to CRLF line endings
- Remember to escape lines starting with "." in DATA
- Response codes 2xx = success, 3xx = continue, 4xx/5xx = error

### RPC Exercise
- Focus on understanding WHY protocols differ in performance
- Payload size directly impacts network bandwidth usage
- Consider both latency and throughput in your analysis
- Real-world choice depends on constraints (legacy systems, debugging needs, performance requirements)

---

*Week 12 Homework ‚Äî Computer Networks*
