<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Revolvix">
    <meta name="generator" content="AT&AC">
    <meta name="description" content="Week 3 Theory - UDP Broadcast, Multicast & TCP Tunnelling - Computer Networks Course">
    <title>Week 3 â€” UDP Broadcast, Multicast &amp; TCP Tunnelling | Computer Networks</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:wght@400;600;700&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #0f172a;
            --primary-light: #1e293b;
            --secondary: #0ea5e9;
            --secondary-dark: #0284c7;
            --accent: #f59e0b;
            --accent-warm: #ea580c;
            --success: #10b981;
            --success-dark: #059669;
            --danger: #ef4444;
            --purple: #8b5cf6;
            --purple-dark: #7c3aed;
            --bg-light: #f8fafc;
            --bg-cool: #f0f9ff;
            --bg-warm: #fffbeb;
            --text-dark: #1e293b;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --code-bg: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            overflow: hidden;
            height: 100vh;
            line-height: 1.6;
        }

        /* Progress Bar */
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--secondary) 0%, var(--success) 50%, var(--accent) 100%);
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1001;
            box-shadow: 0 2px 8px rgba(14, 165, 233, 0.3);
        }

        /* Course identifier */
        .course-badge {
            position: fixed;
            top: 20px;
            left: 25px;
            background: var(--primary);
            color: white;
            padding: 8px 16px;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(15, 23, 42, 0.15);
        }

        /* Slide counter */
        .slide-indicator {
            position: fixed;
            top: 20px;
            right: 25px;
            background: white;
            padding: 8px 16px;
            border-radius: 10px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--primary);
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border: 1px solid var(--border);
        }

        /* Navigation */
        .nav-container {
            position: fixed;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            padding: 14px 28px;
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border);
        }

        .nav-btn {
            padding: 12px 24px;
            border: none;
            background: var(--primary);
            color: white;
            border-radius: 12px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover {
            background: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(14, 165, 233, 0.3);
        }

        .nav-btn:disabled {
            background: var(--border);
            color: var(--text-muted);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .nav-btn.toc-btn {
            background: var(--purple);
        }

        .nav-btn.toc-btn:hover {
            background: var(--purple-dark);
        }

        .nav-btn.fullscreen-btn {
            background: var(--success);
        }

        .nav-btn.fullscreen-btn:hover {
            background: var(--success-dark);
        }

        /* Footer attribution */
        .footer-attr {
            position: fixed;
            bottom: 25px;
            left: 25px;
            font-size: 0.8rem;
            color: var(--text-muted);
            z-index: 999;
        }

        /* Slides Container */
        .slides-container {
            height: 100vh;
            width: 100%;
            position: relative;
        }

        .slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 70px 80px 120px;
            display: none;
            opacity: 0;
            transform: translateX(30px);
            transition: opacity 0.45s ease-out, transform 0.45s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            opacity: 1;
            transform: translateX(0);
        }

        /* Title Slide */
        .slide-title {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 50%, #334155 100%);
            color: white;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .slide-title::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at 30% 70%, rgba(14, 165, 233, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 70% 30%, rgba(139, 92, 246, 0.1) 0%, transparent 50%);
            animation: subtleFloat 20s ease-in-out infinite;
        }

        @keyframes subtleFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(2%, 2%) rotate(1deg); }
        }

        .slide-title h1 {
            font-family: 'Source Serif 4', Georgia, serif;
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
        }

        .slide-title .subtitle {
            font-size: 1.5rem;
            font-weight: 400;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        .slide-title .meta {
            font-size: 1rem;
            opacity: 0.8;
            margin-top: 35px;
            position: relative;
            z-index: 1;
        }

        /* Content Slide */
        .slide-content h2 {
            font-family: 'Source Serif 4', Georgia, serif;
            color: var(--primary);
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 28px;
            padding-bottom: 12px;
            border-bottom: 4px solid var(--secondary);
            display: inline-block;
        }

        .slide-content h3 {
            font-family: 'Source Serif 4', Georgia, serif;
            color: var(--primary-light);
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 15px;
        }

        /* Section intro text */
        .section-intro {
            font-size: 1.15rem;
            line-height: 1.8;
            color: var(--text-dark);
            margin-bottom: 28px;
            max-width: 900px;
        }

        /* Grid layouts */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 28px;
            margin-top: 24px;
        }

        .content-grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-top: 24px;
        }

        .two-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 35px;
            align-items: start;
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 18px;
            padding: 28px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.35s ease;
            border: 1px solid var(--border);
        }

        .card:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);
        }

        .card h3 {
            color: var(--secondary-dark);
            margin-bottom: 18px;
            font-size: 1.2rem;
        }

        .card ul {
            padding-left: 22px;
        }

        .card li {
            margin: 12px 0;
            line-height: 1.7;
            font-size: 1.05rem;
        }

        .card-accent {
            border-left: 5px solid var(--accent);
        }

        .card-success {
            border-left: 5px solid var(--success);
        }

        .card-warning {
            border-left: 5px solid var(--accent-warm);
        }

        .card-danger {
            border-left: 5px solid var(--danger);
        }

        .card-purple {
            border-left: 5px solid var(--purple);
        }

        /* Special Boxes */
        .highlight-box {
            background: linear-gradient(135deg, var(--bg-cool) 0%, #e0f2fe 100%);
            border-left: 5px solid var(--secondary);
            padding: 24px 28px;
            border-radius: 0 16px 16px 0;
            margin: 24px 0;
            font-size: 1.08rem;
            line-height: 1.7;
        }

        .definition-box {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-left: 5px solid var(--success);
            padding: 24px 28px;
            border-radius: 0 16px 16px 0;
            margin: 24px 0;
            font-size: 1.08rem;
        }

        .story-box {
            background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%);
            border-left: 5px solid var(--purple);
            padding: 24px 28px;
            border-radius: 0 16px 16px 0;
            margin: 24px 0;
            font-size: 1.08rem;
        }

        .warning-box {
            background: linear-gradient(135deg, var(--bg-warm) 0%, #fef3c7 100%);
            border-left: 5px solid var(--accent);
            padding: 24px 28px;
            border-radius: 0 16px 16px 0;
            margin: 24px 0;
            font-size: 1.08rem;
        }

        .insight-box {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-left: 5px solid var(--danger);
            padding: 24px 28px;
            border-radius: 0 16px 16px 0;
            margin: 24px 0;
            font-size: 1.08rem;
        }

        /* Code blocks */
        .code-block {
            background: var(--code-bg);
            color: #e2e8f0;
            padding: 24px 28px;
            border-radius: 14px;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 1rem;
            overflow-x: auto;
            margin: 18px 0;
            line-height: 1.7;
            position: relative;
            box-shadow: 0 8px 24px rgba(15, 23, 42, 0.2);
        }

        .code-block::before {
            content: attr(data-lang);
            position: absolute;
            top: 12px;
            right: 16px;
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .code-block .comment { color: #64748b; font-style: italic; }
        .code-block .keyword { color: #f472b6; }
        .code-block .string { color: #4ade80; }
        .code-block .number { color: #fb923c; }
        .code-block .function { color: #60a5fa; }
        .code-block .builtin { color: #c084fc; }
        .code-block .decorator { color: #fbbf24; }

        /* Pseudocode */
        .pseudocode {
            background: linear-gradient(135deg, #1e3a5f 0%, #1e293b 100%);
            color: #bae6fd;
            padding: 22px 26px;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            line-height: 1.8;
        }

        .pseudocode .step {
            color: #38bdf8;
            font-weight: 600;
        }

        .pseudocode .note {
            color: #94a3b8;
            font-style: italic;
            font-size: 0.88rem;
        }

        /* ASCII Diagrams */
        .ascii-diagram {
            font-family: 'JetBrains Mono', monospace;
            background: var(--code-bg);
            color: #4ade80;
            padding: 28px;
            border-radius: 14px;
            white-space: pre;
            overflow-x: auto;
            font-size: 0.9rem;
            line-height: 1.5;
            box-shadow: 0 8px 24px rgba(15, 23, 42, 0.2);
        }

        /* SVG Diagrams */
        .diagram-container {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            margin: 20px 0;
            overflow: hidden;
        }

        .diagram-container svg {
            width: 100%;
            height: auto;
            max-height: 400px;
        }

        /* Tables */
        .table-container {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            margin: 24px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 1.02rem;
        }

        th, td {
            padding: 18px 22px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
        }

        th:first-child {
            border-radius: 16px 0 0 0;
        }

        th:last-child {
            border-radius: 0 16px 0 0;
        }

        tr:hover {
            background: var(--bg-cool);
        }

        tr:last-child td {
            border-bottom: none;
        }

        /* Quiz components */
        .quiz-container {
            background: white;
            border-radius: 18px;
            padding: 32px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            max-width: 850px;
            margin: 0 auto;
        }

        .quiz-question {
            font-size: 1.25rem;
            color: var(--primary);
            margin-bottom: 28px;
            line-height: 1.6;
            font-weight: 500;
        }

        .quiz-option {
            display: block;
            padding: 18px 24px;
            margin: 14px 0;
            background: var(--bg-light);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 1.05rem;
        }

        .quiz-option:hover {
            border-color: var(--secondary);
            background: var(--bg-cool);
            transform: translateX(8px);
        }

        .quiz-option.correct {
            border-color: var(--success);
            background: #ecfdf5;
        }

        .quiz-option.incorrect {
            border-color: var(--danger);
            background: #fef2f2;
        }

        .quiz-feedback {
            margin-top: 24px;
            padding: 20px 24px;
            border-radius: 12px;
            display: none;
            font-size: 1.05rem;
            line-height: 1.6;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-feedback.correct {
            background: #ecfdf5;
            color: #166534;
            border: 2px solid var(--success);
        }

        .quiz-feedback.incorrect {
            background: #fef2f2;
            color: #991b1b;
            border: 2px solid var(--danger);
        }

        /* Reveal components */
        .reveal-container {
            background: white;
            border-radius: 18px;
            padding: 32px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            text-align: center;
        }

        .reveal-question {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 24px;
            line-height: 1.6;
        }

        .reveal-btn {
            padding: 14px 32px;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--secondary-dark) 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .reveal-btn:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 24px rgba(14, 165, 233, 0.35);
        }

        .reveal-content {
            margin-top: 28px;
            padding: 28px;
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-radius: 14px;
            display: none;
            text-align: left;
            font-size: 1.05rem;
            line-height: 1.7;
        }

        .reveal-content.show {
            display: block;
            animation: fadeUp 0.5s ease-out;
        }

        /* Icon boxes */
        .icon-box {
            display: flex;
            align-items: flex-start;
            gap: 18px;
            margin: 18px 0;
        }

        .icon-box .icon {
            font-size: 2.2rem;
            flex-shrink: 0;
        }

        .icon-box-content {
            flex: 1;
        }

        /* Protocol header visualization */
        .protocol-header {
            display: flex;
            flex-wrap: wrap;
            background: white;
            border-radius: 14px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin: 20px 0;
        }

        .header-field {
            flex: 1;
            min-width: 80px;
            padding: 16px;
            border: 1px solid var(--border);
            text-align: center;
        }

        .header-field .field-name {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 6px;
        }

        .header-field .field-value {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            color: var(--primary);
            font-size: 1rem;
        }

        .header-field .field-bits {
            font-size: 0.7rem;
            color: var(--secondary);
            margin-top: 4px;
        }

        .span-2 { flex: 2; }
        .span-4 { flex: 4; }
        .span-8 { flex: 8; }

        /* Interactive calculators */
        .interactive-panel {
            background: white;
            border-radius: 18px;
            padding: 28px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            margin: 20px 0;
        }

        .interactive-panel label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
        }

        .interactive-panel input[type="range"] {
            width: 100%;
            margin: 12px 0;
            accent-color: var(--secondary);
        }

        .result-display {
            background: linear-gradient(135deg, var(--bg-cool) 0%, #e0f2fe 100%);
            padding: 20px 24px;
            border-radius: 12px;
            margin-top: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            text-align: center;
        }

        /* Animations */
        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .delay-1 { animation-delay: 0.1s; }
        .delay-2 { animation-delay: 0.2s; }
        .delay-3 { animation-delay: 0.3s; }
        .delay-4 { animation-delay: 0.4s; }
        .delay-5 { animation-delay: 0.5s; }
        .delay-6 { animation-delay: 0.6s; }

        /* TOC Modal */
        .toc-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(8px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .toc-modal.show {
            display: flex;
        }

        .toc-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 700px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
        }

        .toc-content h2 {
            font-family: 'Source Serif 4', Georgia, serif;
            color: var(--primary);
            margin-bottom: 28px;
            padding-bottom: 14px;
            border-bottom: 3px solid var(--secondary);
        }

        .toc-section {
            margin-bottom: 24px;
        }

        .toc-section-title {
            font-weight: 600;
            color: var(--secondary-dark);
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        .toc-item {
            padding: 10px 16px;
            margin: 6px 0;
            background: var(--bg-light);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.25s ease;
            font-size: 0.95rem;
        }

        .toc-item:hover {
            background: var(--bg-cool);
            transform: translateX(8px);
            color: var(--secondary-dark);
        }

        .toc-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .toc-close:hover {
            background: var(--danger);
            transform: rotate(90deg);
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .content-grid-3 {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 1024px) {
            .two-columns {
                grid-template-columns: 1fr;
            }
            .slide {
                padding: 60px 50px 110px;
            }
            .content-grid-3 {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .slide {
                padding: 50px 30px 100px;
            }
            .slide-title h1 {
                font-size: 2.4rem;
            }
            .slide-content h2 {
                font-size: 1.8rem;
            }
            .nav-container {
                padding: 10px 16px;
            }
            .nav-btn {
                padding: 10px 16px;
                font-size: 0.85rem;
            }
        }

        /* Code inline */
        code {
            font-family: 'JetBrains Mono', monospace;
            background: #f1f5f9;
            padding: 3px 8px;
            border-radius: 6px;
            font-size: 0.92em;
            color: var(--danger);
        }

        /* Lists in content */
        .slide-content ul, .slide-content ol {
            padding-left: 24px;
        }

        .slide-content li {
            margin: 10px 0;
            line-height: 1.7;
        }

        /* Strong emphasis */
        strong {
            color: var(--primary);
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-bar" id="progressBar"></div>
    
    <!-- Course Badge -->
    <div class="course-badge">ASE-CSIE â€¢ Computer Networks</div>
    
    <!-- Slide Counter -->
    <div class="slide-indicator">
        <span id="currentSlide">1</span> / <span id="totalSlides">52</span>
    </div>

    <!-- Footer Attribution -->
    <div class="footer-attr">by Revolvix</div>

    <!-- Slides Container -->
    <div class="slides-container" id="slidesContainer">

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             SECTION 1: INTRODUCTION (Slides 1-6)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

        <!-- SLIDE 1: Title -->
        <div class="slide slide-title active" id="slide1">
            <h1>ğŸŒ UDP Broadcast, Multicast &amp; TCP Tunnelling</h1>
            <div class="subtitle">Week 3 â€” Computer Networks</div>
            <div class="meta">
                BSc Economic Informatics, Year 3, Semester 2<br>
                Bucharest University of Economic Studies â€” Faculty CSIE
            </div>
        </div>

        <!-- SLIDE 2: Historical Context -->
        <div class="slide slide-content" id="slide2">
            <h2>ğŸ“œ A Brief History: From ARPANET to Your Application</h2>
            <div class="story-box">
                <strong>1983:</strong> The Berkeley Socket API was introduced in BSD 4.2 Unix, creating a universal abstraction for network communication. Forty years later, nearly every networked applicationâ€”from web browsers to video games to IoT sensorsâ€”still uses this same fundamental interface.
            </div>
            <div class="content-grid">
                <div class="card card-purple">
                    <h3>ğŸ›ï¸ The BSD Legacy</h3>
                    <ul>
                        <li>Sockets designed for Unix inter-process communication</li>
                        <li>Extended to support TCP/IP networking</li>
                        <li>Adopted by virtually every operating system</li>
                        <li>Python's <code>socket</code> module is a thin wrapper</li>
                    </ul>
                </div>
                <div class="card card-success">
                    <h3>ğŸ”„ Why It Matters Today</h3>
                    <ul>
                        <li>Microservices communicate via sockets</li>
                        <li>Container networking builds on same primitives</li>
                        <li>Understanding sockets = debugging production issues</li>
                        <li>Performance tuning requires socket knowledge</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SLIDE 3: Learning Objectives -->
        <div class="slide slide-content" id="slide3">
            <h2>ğŸ¯ Learning Objectives</h2>
            <p class="section-intro">By the end of this session, you will be able to:</p>
            <div class="content-grid">
                <div class="card card-accent">
                    <h3>ğŸ”§ Implement</h3>
                    <ul>
                        <li><strong>Construct</strong> UDP broadcast senders and receivers</li>
                        <li><strong>Develop</strong> multicast group communication</li>
                        <li><strong>Build</strong> a TCP tunnel for port forwarding</li>
                        <li><strong>Create</strong> bidirectional data forwarding with threads</li>
                    </ul>
                </div>
                <div class="card card-success">
                    <h3>ğŸ” Analyse</h3>
                    <ul>
                        <li><strong>Differentiate</strong> between broadcast and multicast</li>
                        <li><strong>Examine</strong> packet captures with tcpdump</li>
                        <li><strong>Compare</strong> TCP and UDP trade-offs</li>
                        <li><strong>Diagnose</strong> common socket programming errors</li>
                    </ul>
                </div>
                <div class="card card-purple">
                    <h3>ğŸ“Š Evaluate</h3>
                    <ul>
                        <li><strong>Assess</strong> when to use broadcast vs multicast</li>
                        <li><strong>Justify</strong> protocol choices for applications</li>
                        <li><strong>Critique</strong> tunnel architectures</li>
                        <li><strong>Recommend</strong> socket options for scenarios</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SLIDE 4: Course Roadmap -->
        <div class="slide slide-content" id="slide4">
            <h2>ğŸ—ºï¸ Where We Are in the Course</h2>
            <div class="diagram-container">
                <svg viewBox="0 0 900 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- Timeline -->
                    <line x1="50" y1="100" x2="850" y2="100" stroke="#e2e8f0" stroke-width="4"/>
                    
                    <!-- Week markers -->
                    <circle cx="100" cy="100" r="20" fill="#10b981"/>
                    <text x="100" y="105" text-anchor="middle" fill="white" font-size="12" font-weight="bold">1</text>
                    <text x="100" y="145" text-anchor="middle" fill="#64748b" font-size="10">Fundamentals</text>
                    
                    <circle cx="250" cy="100" r="20" fill="#10b981"/>
                    <text x="250" y="105" text-anchor="middle" fill="white" font-size="12" font-weight="bold">2</text>
                    <text x="250" y="145" text-anchor="middle" fill="#64748b" font-size="10">OSI/TCP-IP</text>
                    
                    <circle cx="400" cy="100" r="28" fill="#0ea5e9" stroke="#0284c7" stroke-width="4"/>
                    <text x="400" y="105" text-anchor="middle" fill="white" font-size="14" font-weight="bold">3</text>
                    <text x="400" y="145" text-anchor="middle" fill="#0ea5e9" font-size="11" font-weight="bold">Socket Programming</text>
                    <text x="400" y="160" text-anchor="middle" fill="#0ea5e9" font-size="9">YOU ARE HERE</text>
                    
                    <circle cx="550" cy="100" r="20" fill="#e2e8f0"/>
                    <text x="550" y="105" text-anchor="middle" fill="#64748b" font-size="12" font-weight="bold">4</text>
                    <text x="550" y="145" text-anchor="middle" fill="#64748b" font-size="10">Physical/Data Link</text>
                    
                    <circle cx="700" cy="100" r="20" fill="#e2e8f0"/>
                    <text x="700" y="105" text-anchor="middle" fill="#64748b" font-size="12" font-weight="bold">5</text>
                    <text x="700" y="145" text-anchor="middle" fill="#64748b" font-size="10">IP Addressing</text>
                    
                    <circle cx="850" cy="100" r="20" fill="#e2e8f0"/>
                    <text x="850" y="105" text-anchor="middle" fill="#64748b" font-size="10">...</text>
                    <text x="850" y="145" text-anchor="middle" fill="#64748b" font-size="10">Weeks 6-14</text>
                    
                    <!-- Arrow indicator -->
                    <polygon points="400,55 390,70 410,70" fill="#f59e0b"/>
                </svg>
            </div>
            <div class="highlight-box">
                <strong>Prerequisites:</strong> Basic Python programming, understanding of client-server architecture, familiarity with IP addresses and ports (from Weeks 1-2).
            </div>
        </div>

        <!-- SLIDE 5: Why This Matters -->
        <div class="slide slide-content" id="slide5">
            <h2>ğŸ’¡ Why Does This Matter for Developers?</h2>
            <div class="story-box">
                <strong>Industry Example:</strong> In 2014, Riot Games migrated League of Legends from TCP to UDP for real-time gameplay. Why? Because in competitive gaming, a delayed packet is worse than a lost one. TCP's retransmission guarantees caused unacceptable latency spikes.
            </div>
            <div class="content-grid">
                <div class="card card-accent">
                    <h3>ğŸ—ï¸ Microservices &amp; Containers</h3>
                    <ul>
                        <li>Service discovery uses broadcast/multicast</li>
                        <li>Health checks and heartbeat protocols</li>
                        <li>Inter-container communication patterns</li>
                        <li>Kubernetes networking fundamentals</li>
                    </ul>
                </div>
                <div class="card card-danger">
                    <h3>ğŸ› Debugging Production</h3>
                    <ul>
                        <li>"Why won't it connect?" â€” socket options</li>
                        <li>Traffic analysis with tcpdump/Wireshark</li>
                        <li>Firewall and NAT troubleshooting</li>
                        <li>Connection timeout diagnosis</li>
                    </ul>
                </div>
                <div class="card card-purple">
                    <h3>ğŸ”’ Security &amp; Architecture</h3>
                    <ul>
                        <li>Port forwarding and SSH tunnels</li>
                        <li>Proxy and reverse proxy patterns</li>
                        <li>NAT traversal techniques</li>
                        <li>Network segmentation</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SLIDE 6: Today's Agenda -->
        <div class="slide slide-content" id="slide6">
            <h2>ğŸ“‹ Today's Agenda</h2>
            <div class="content-grid">
                <div class="card card-success">
                    <h3>Part 1: Socket Fundamentals (15 min)</h3>
                    <ul>
                        <li>What is a socket?</li>
                        <li>TCP vs UDP comparison</li>
                        <li>The socket API lifecycle</li>
                    </ul>
                </div>
                <div class="card card-accent">
                    <h3>Part 2: UDP Broadcast (20 min)</h3>
                    <ul>
                        <li>One-to-all communication</li>
                        <li>The SO_BROADCAST option</li>
                        <li>Practical implementation</li>
                    </ul>
                </div>
                <div class="card card-purple">
                    <h3>Part 3: UDP Multicast (20 min)</h3>
                    <ul>
                        <li>Group-based communication</li>
                        <li>IGMP and group membership</li>
                        <li>Multicast addressing</li>
                    </ul>
                </div>
                <div class="card card-danger">
                    <h3>Part 4: TCP Tunnelling (20 min)</h3>
                    <ul>
                        <li>Port forwarding concepts</li>
                        <li>Bidirectional data flow</li>
                        <li>Threading for full-duplex</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             SECTION 2: SOCKET FUNDAMENTALS (Slides 7-14)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

        <!-- SLIDE 7: What is a Socket? -->
        <div class="slide slide-content" id="slide7">
            <h2>ğŸ”Œ What Is a Socket?</h2>
            <div class="definition-box">
                <strong>Definition:</strong> A socket is an <em>endpoint</em> for communicationâ€”a software interface that allows a process to send and receive data over a network. Think of it as a "power outlet" through which your application plugs into the network.
            </div>
            <div class="ascii-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         YOUR APPLICATION                                 â”‚
â”‚                               â”‚                                          â”‚
â”‚                          socket()  â† creates endpoint                    â”‚
â”‚                               â”‚                                          â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚            â”‚                                     â”‚                       â”‚
â”‚      SOCK_STREAM (TCP)                    SOCK_DGRAM (UDP)               â”‚
â”‚            â”‚                                     â”‚                       â”‚
â”‚     connect/accept                          sendto/recvfrom              â”‚
â”‚       send/recv                                  â”‚                       â”‚
â”‚            â”‚                                     â”‚                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     KERNEL (OS)     â”‚
                    â”‚    TCP/IP Stack     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   NETWORK CARD      â”‚
                    â”‚   (NIC / eth0)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>
        </div>

        <!-- SLIDE 8: Socket Address -->
        <div class="slide slide-content" id="slide8">
            <h2>ğŸ“ Socket Addressing: The Complete Picture</h2>
            <p class="section-intro">Every socket is uniquely identified by a <strong>5-tuple</strong> that completely describes a network connection:</p>
            <div class="protocol-header" style="max-width: 800px; margin: 30px auto;">
                <div class="header-field span-2">
                    <div class="field-name">Protocol</div>
                    <div class="field-value">TCP / UDP</div>
                    <div class="field-bits">Layer 4</div>
                </div>
                <div class="header-field span-2">
                    <div class="field-name">Source IP</div>
                    <div class="field-value">192.168.1.10</div>
                    <div class="field-bits">Local address</div>
                </div>
                <div class="header-field">
                    <div class="field-name">Source Port</div>
                    <div class="field-value">54321</div>
                    <div class="field-bits">Ephemeral</div>
                </div>
                <div class="header-field span-2">
                    <div class="field-name">Dest IP</div>
                    <div class="field-value">10.0.0.5</div>
                    <div class="field-bits">Remote address</div>
                </div>
                <div class="header-field">
                    <div class="field-name">Dest Port</div>
                    <div class="field-value">80</div>
                    <div class="field-bits">Well-known</div>
                </div>
            </div>
            <div class="highlight-box">
                <strong>Port Ranges:</strong> 0-1023 (well-known, require root), 1024-49151 (registered), 49152-65535 (dynamic/ephemeral). The starterkit uses ports <code>5300-5399</code> for Week 3 exercises.
            </div>
        </div>

        <!-- SLIDE 9: TCP vs UDP Visual -->
        <div class="slide slide-content" id="slide9">
            <h2>âš–ï¸ TCP vs UDP â€” The Fundamental Trade-off</h2>
            <div class="two-columns">
                <div class="card" style="border-top: 5px solid var(--secondary);">
                    <h3>ğŸ“ TCP (Transmission Control Protocol)</h3>
                    <div class="ascii-diagram" style="font-size: 0.85rem; padding: 18px;">
Client              Server
  â”‚                   â”‚
  â”‚â”€â”€â”€â”€ SYN â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚â—„â”€â”€â”€ SYN+ACK â”€â”€â”€â”€â”€â”€â”‚
  â”‚â”€â”€â”€â”€ ACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚
  â”‚â•â• CONNECTION â•â•â•â•â•â”‚
  â”‚                   â”‚
  â”‚â”€â”€â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚â—„â”€â”€â”€ ACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚â”€â”€â”€â”€ FIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚â—„â”€â”€â”€ FIN+ACK â”€â”€â”€â”€â”€â”€â”‚</div>
                    <ul style="margin-top: 15px;">
                        <li>Connection-oriented (handshake)</li>
                        <li>Guaranteed, ordered delivery</li>
                        <li>Flow &amp; congestion control</li>
                        <li>Higher latency, more overhead</li>
                    </ul>
                </div>
                <div class="card" style="border-top: 5px solid var(--success);">
                    <h3>ğŸ“¨ UDP (User Datagram Protocol)</h3>
                    <div class="ascii-diagram" style="font-size: 0.85rem; padding: 18px;">
Sender              Receiver
  â”‚                   â”‚
  â”‚â”€â”€â”€â”€ DATAGRAM â”€â”€â”€â”€â–ºâ”‚
  â”‚â”€â”€â”€â”€ DATAGRAM â”€â”€â”€â”€â–ºâ”‚
  â”‚â”€â”€â”€â”€ DATAGRAM â”€â”€â”€â”€â–ºâ”‚
  â”‚                   â”‚
  â”‚    (no ACK!)      â”‚
  â”‚   (no ordering!)  â”‚
  â”‚  (may be lost!)   â”‚
  â”‚                   â”‚</div>
                    <ul style="margin-top: 15px;">
                        <li>Connectionless (fire-and-forget)</li>
                        <li>No delivery guarantees</li>
                        <li>Minimal overhead (8-byte header)</li>
                        <li>Supports broadcast &amp; multicast</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SLIDE 10: TCP vs UDP Table -->
        <div class="slide slide-content" id="slide10">
            <h2>ğŸ“Š TCP vs UDP â€” Detailed Comparison</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Characteristic</th>
                            <th>TCP</th>
                            <th>UDP</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Connection</strong></td>
                            <td>Yes (3-way handshake)</td>
                            <td>No</td>
                        </tr>
                        <tr>
                            <td><strong>Reliability</strong></td>
                            <td>Guaranteed (automatic retransmission)</td>
                            <td>None (best effort)</td>
                        </tr>
                        <tr>
                            <td><strong>Ordering</strong></td>
                            <td>Guaranteed (sequence numbers)</td>
                            <td>Not guaranteed</td>
                        </tr>
                        <tr>
                            <td><strong>Header Size</strong></td>
                            <td>20-60 bytes</td>
                            <td>8 bytes</td>
                        </tr>
                        <tr>
                            <td><strong>Broadcast/Multicast</strong></td>
                            <td>Not supported (point-to-point only)</td>
                            <td>Fully supported</td>
                        </tr>
                        <tr>
                            <td><strong>Typical Uses</strong></td>
                            <td>HTTP, SSH, FTP, SMTP, databases</td>
                            <td>DNS, DHCP, VoIP, gaming, streaming</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="warning-box">
                <strong>Common Misconception:</strong> "UDP is faster than TCP." Not always! TCP's overhead is constant regardless of data size. For large transfers, TCP's flow control often outperforms naive UDP implementations.
            </div>
        </div>

        <!-- SLIDE 11: Quiz - TCP vs UDP -->
        <div class="slide slide-content" id="slide11">
            <h2>ğŸ§  Knowledge Check: Protocol Selection</h2>
            <div class="quiz-container">
                <div class="quiz-question">You're building a real-time chat application for 1,000 concurrent users. Messages must arrive in order and none can be lost. Which protocol should you choose?</div>
                <div class="quiz-option" onclick="checkQuiz(this, false, 'quiz1')">UDP â€” low latency is critical for real-time communication</div>
                <div class="quiz-option" onclick="checkQuiz(this, true, 'quiz1')">TCP â€” messages must be delivered reliably and in order</div>
                <div class="quiz-option" onclick="checkQuiz(this, false, 'quiz1')">Either works equally well for this use case</div>
                <div class="quiz-feedback" id="quiz1-feedback"></div>
            </div>
        </div>

        <!-- SLIDE 12: Socket API Python -->
        <div class="slide slide-content" id="slide12">
            <h2>ğŸ The Socket API Lifecycle</h2>
            <div class="two-columns">
                <div>
                    <h3 style="color: var(--secondary-dark); margin-bottom: 15px;">TCP Server Pattern</h3>
                    <div class="pseudocode">
<span class="step">1.</span> socket()     <span class="note">// create TCP socket</span>
<span class="step">2.</span> setsockopt() <span class="note">// configure options</span>
<span class="step">3.</span> bind()       <span class="note">// attach to address:port</span>
<span class="step">4.</span> listen()     <span class="note">// mark as server</span>
<span class="step">5.</span> accept()     <span class="note">// wait for client (BLOCKS)</span>
<span class="step">6.</span> recv/send    <span class="note">// communicate</span>
<span class="step">7.</span> close()      <span class="note">// release resources</span>
                    </div>
                </div>
                <div>
                    <h3 style="color: var(--secondary-dark); margin-bottom: 15px;">TCP Client Pattern</h3>
                    <div class="pseudocode">
<span class="step">1.</span> socket()     <span class="note">// create TCP socket</span>
<span class="step">2.</span> connect()    <span class="note">// initiate 3-way handshake</span>
<span class="step">3.</span> send/recv    <span class="note">// communicate</span>
<span class="step">4.</span> close()      <span class="note">// release resources</span>
                    </div>
                    <h3 style="color: var(--success-dark); margin-bottom: 15px; margin-top: 25px;">UDP Pattern (Sender)</h3>
                    <div class="pseudocode">
<span class="step">1.</span> socket(SOCK_DGRAM)  <span class="note">// UDP!</span>
<span class="step">2.</span> sendto(data, addr)  <span class="note">// fire and forget</span>
<span class="step">3.</span> close()
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 13: TCP Server Code -->
        <div class="slide slide-content" id="slide13">
            <h2>ğŸ’» TCP Server â€” Python Implementation</h2>
            <div class="code-block" data-lang="python">
<span class="keyword">import</span> socket

<span class="comment"># Step 1: Create TCP socket (IPv4)</span>
sock = socket.socket(socket.<span class="builtin">AF_INET</span>, socket.<span class="builtin">SOCK_STREAM</span>)

<span class="comment"># Step 2: Allow port reuse (avoids "Address already in use")</span>
sock.setsockopt(socket.<span class="builtin">SOL_SOCKET</span>, socket.<span class="builtin">SO_REUSEADDR</span>, <span class="number">1</span>)

<span class="comment"># Step 3: Bind to all interfaces, port 8080</span>
sock.bind((<span class="string">""</span>, <span class="number">8080</span>))  <span class="comment"># "" = 0.0.0.0 = INADDR_ANY</span>

<span class="comment"># Step 4: Mark as server, queue up to 5 pending connections</span>
sock.listen(<span class="number">5</span>)

<span class="comment"># Step 5: Accept connection (BLOCKING call!)</span>
client_sock, (client_ip, client_port) = sock.accept()
<span class="function">print</span>(<span class="string">f"Connected: </span>{client_ip}<span class="string">:</span>{client_port}<span class="string">"</span>)

<span class="comment"># Step 6: Receive data (max 1024 bytes)</span>
data = client_sock.recv(<span class="number">1024</span>)
            </div>
            <div class="warning-box">
                <strong>âš ï¸ Blocking Operations:</strong> Both <code>accept()</code> and <code>recv()</code> are blockingâ€”the program halts until data arrives. For production servers, use threading, asyncio, or select/poll.
            </div>
        </div>

        <!-- SLIDE 14: C Context -->
        <div class="slide slide-content" id="slide14">
            <h2>ğŸ”§ BSD Sockets Heritage: The C Perspective</h2>
            <div class="story-box">
                Python's socket module directly mirrors the original BSD socket API from C. Understanding the C roots helps debug low-level issues and read system documentation.
            </div>
            <div class="two-columns">
                <div class="code-block" data-lang="c" style="font-size: 0.92rem;">
<span class="comment">/* C: Creating a TCP server socket */</span>
<span class="keyword">int</span> sockfd = <span class="function">socket</span>(AF_INET, SOCK_STREAM, <span class="number">0</span>);

<span class="keyword">struct</span> sockaddr_in addr;
addr.sin_family = AF_INET;
addr.sin_addr.s_addr = INADDR_ANY;
addr.sin_port = <span class="function">htons</span>(<span class="number">8080</span>);  <span class="comment">// host-to-network byte order</span>

<span class="function">bind</span>(sockfd, (<span class="keyword">struct</span> sockaddr*)&addr, 
     <span class="keyword">sizeof</span>(addr));
<span class="function">listen</span>(sockfd, <span class="number">5</span>);
                </div>
                <div>
                    <div class="highlight-box">
                        <strong>Key Differences in C:</strong>
                        <ul style="margin-top: 10px;">
                            <li><code>htons()</code> â€” convert port to network byte order (big-endian)</li>
                            <li><code>sockaddr_in</code> â€” structure holding address family, IP, and port</li>
                            <li>Manual memory management and error checking</li>
                            <li>Python abstracts these details away</li>
                        </ul>
                    </div>
                    <p style="margin-top: 15px; font-size: 0.95rem; color: var(--text-muted);">
                        <strong>Reference:</strong> <code>man 7 socket</code>, <code>man 2 bind</code>, <code>man 7 ip</code>
                    </p>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             SECTION 3: UDP BROADCAST (Slides 15-24)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

        <!-- SLIDE 15: Broadcast Concept -->
        <div class="slide slide-content" id="slide15">
            <h2>ğŸ“¡ UDP Broadcast â€” One-to-All Communication</h2>
            <div class="definition-box">
                <strong>Definition:</strong> Broadcast sends a single packet to <em>all</em> hosts within a Layer 2 domain (LAN segment). Every device receives the frame at the data link layer, regardless of whether an application is listening.
            </div>
            <div class="ascii-diagram">
                       â”Œâ”€â”€â”€â”€â”€â”€â”
                       â”‚  h1  â”‚  SENDER
                       â”‚ .1   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â””â”€â”€â”€â”€â”€â”€â”˜        â”‚
                                       â–¼
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚   SWITCH   â”‚  forwards to ALL ports
                                â”‚     s1     â”‚
                                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â–¼           â–¼           â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
                       â”‚  h2  â”‚    â”‚  h3  â”‚    â”‚  h4  â”‚
                       â”‚ .2   â”‚    â”‚ .3   â”‚    â”‚ .4   â”‚
                       â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜
                       RECEIVES    RECEIVES    RECEIVES
                       (listening) (sleeping)  (no app)

       Destination IP:  255.255.255.255 (limited broadcast)
       Destination MAC: ff:ff:ff:ff:ff:ff (L2 broadcast)</div>
        </div>

        <!-- SLIDE 16: Broadcast Addresses -->
        <div class="slide slide-content" id="slide16">
            <h2>ğŸ¯ Broadcast Address Types</h2>
            <div class="content-grid">
                <div class="card card-accent">
                    <h3>255.255.255.255</h3>
                    <p style="font-weight: 600; color: var(--accent);">Limited Broadcast</p>
                    <ul>
                        <li>Never forwarded by routers</li>
                        <li>Stays within local L2 segment</li>
                        <li>Used when sender doesn't know its subnet</li>
                        <li>Example: DHCP discovery</li>
                    </ul>
                </div>
                <div class="card card-success">
                    <h3>10.0.3.255</h3>
                    <p style="font-weight: 600; color: var(--success);">Directed Broadcast</p>
                    <ul>
                        <li>Broadcast for specific subnet (10.0.3.0/24)</li>
                        <li>Can be routed (if enabled)</li>
                        <li>Host bits all set to 1</li>
                        <li>Often disabled for security (Smurf attack)</li>
                    </ul>
                </div>
            </div>
            <div class="warning-box">
                <strong>Security Note:</strong> Directed broadcasts are disabled on most modern routers because they enable <em>amplification attacks</em>. A single packet can generate responses from hundreds of hosts, overwhelming a victim.
            </div>
        </div>

        <!-- SLIDE 17: SO_BROADCAST -->
        <div class="slide slide-content" id="slide17">
            <h2>ğŸ”‘ The Critical Socket Option: SO_BROADCAST</h2>
            <div class="insight-box">
                <strong>Why does this exist?</strong> Operating systems block broadcast by default as a safety measure. Broadcasting floods the networkâ€”every host must process the frame, even if uninterested. Explicit permission is required.
            </div>
            <div class="code-block" data-lang="python">
<span class="keyword">import</span> socket

<span class="comment"># Create UDP socket</span>
sock = socket.socket(socket.<span class="builtin">AF_INET</span>, socket.<span class="builtin">SOCK_DGRAM</span>)

<span class="comment"># MANDATORY: Enable broadcast permission</span>
sock.setsockopt(socket.<span class="builtin">SOL_SOCKET</span>, socket.<span class="builtin">SO_BROADCAST</span>, <span class="number">1</span>)

<span class="comment"># Now broadcast is allowed</span>
sock.sendto(<span class="string">b"HELLO EVERYONE!"</span>, (<span class="string">"255.255.255.255"</span>, <span class="number">5007</span>))
            </div>
            <div class="highlight-box">
                <strong>Without SO_BROADCAST:</strong> You'll receive <code>PermissionError: [Errno 13] Permission denied</code> or <code>OSError: [Errno 101] Network is unreachable</code> on Linux.
            </div>
        </div>

        <!-- SLIDE 18: Broadcast Sender Implementation -->
        <div class="slide slide-content" id="slide18">
            <h2>ğŸ’» Broadcast Sender â€” Complete Implementation</h2>
            <div class="code-block" data-lang="python" style="font-size: 0.95rem;">
<span class="comment"># From: WEEK3/python/examples/ex01_udp_broadcast.py</span>

<span class="keyword">import</span> socket
<span class="keyword">import</span> time

<span class="comment"># Configuration</span>
BROADCAST_ADDR = <span class="string">"255.255.255.255"</span>
PORT = <span class="number">5007</span>

<span class="comment"># Step 1: Create UDP socket</span>
sock = socket.socket(socket.<span class="builtin">AF_INET</span>, socket.<span class="builtin">SOCK_DGRAM</span>)

<span class="comment"># Step 2: Enable SO_BROADCAST (CRITICAL!)</span>
sock.setsockopt(socket.<span class="builtin">SOL_SOCKET</span>, socket.<span class="builtin">SO_BROADCAST</span>, <span class="number">1</span>)

<span class="comment"># Step 3: Send broadcast messages</span>
<span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">5</span>):
    message = <span class="string">f"HELLO_BCAST #</span>{i}<span class="string">"</span>.encode(<span class="string">"utf-8"</span>)
    sock.sendto(message, (BROADCAST_ADDR, PORT))
    <span class="function">print</span>(<span class="string">f"Sent: </span>{message}<span class="string">"</span>)
    time.sleep(<span class="number">1</span>)

sock.close()
            </div>
            <p style="margin-top: 15px; font-size: 0.95rem; color: var(--text-muted);">
                <strong>ğŸ“ Full implementation:</strong> <code>WEEK3/python/examples/ex01_udp_broadcast.py</code>
            </p>
        </div>

        <!-- SLIDE 19: Broadcast Receiver -->
        <div class="slide slide-content" id="slide19">
            <h2>ğŸ’» Broadcast Receiver â€” Complete Implementation</h2>
            <div class="code-block" data-lang="python" style="font-size: 0.95rem;">
<span class="comment"># Broadcast Receiver</span>

<span class="keyword">import</span> socket

PORT = <span class="number">5007</span>
BUFFER_SIZE = <span class="number">65535</span>

<span class="comment"># Step 1: Create UDP socket</span>
sock = socket.socket(socket.<span class="builtin">AF_INET</span>, socket.<span class="builtin">SOCK_DGRAM</span>)

<span class="comment"># Step 2: Allow port reuse (useful for testing)</span>
sock.setsockopt(socket.<span class="builtin">SOL_SOCKET</span>, socket.<span class="builtin">SO_REUSEADDR</span>, <span class="number">1</span>)

<span class="comment"># Step 3: Bind to all interfaces ("") to receive broadcasts</span>
sock.bind((<span class="string">""</span>, PORT))  <span class="comment"># "" = INADDR_ANY = 0.0.0.0</span>

<span class="function">print</span>(<span class="string">f"Listening for broadcasts on port </span>{PORT}<span class="string">..."</span>)

<span class="comment"># Step 4: Receive datagrams</span>
<span class="keyword">while</span> <span class="builtin">True</span>:
    data, (sender_ip, sender_port) = sock.recvfrom(BUFFER_SIZE)
    <span class="function">print</span>(<span class="string">f"Received from </span>{sender_ip}<span class="string">:</span>{sender_port}<span class="string"> â†’ </span>{data.decode()}<span class="string">"</span>)
            </div>
            <div class="highlight-box">
                <strong>Key Point:</strong> The receiver does <em>not</em> need <code>SO_BROADCAST</code>â€”that's only for sending. Binding to <code>""</code> (empty string) means listening on all interfaces.
            </div>
        </div>

        <!-- SLIDE 20: Quiz - Broadcast -->
        <div class="slide slide-content" id="slide20">
            <h2>ğŸ§  Prediction: What Happens?</h2>
            <div class="quiz-container">
                <div class="quiz-question">You run a broadcast sender on h1 and a receiver on h2. Host h3 is powered on but has no application running. What do you observe if you run <code>tcpdump -ni h3-eth0 udp port 5007</code> on h3?</div>
                <div class="quiz-option" onclick="checkQuiz(this, false, 'quiz2')">Nothing â€” h3 isn't participating in the communication</div>
                <div class="quiz-option" onclick="checkQuiz(this, true, 'quiz2')">The packets appear in tcpdump â€” frames arrive at L2 regardless of application</div>
                <div class="quiz-option" onclick="checkQuiz(this, false, 'quiz2')">Error â€” broadcast requires all participants to have receivers</div>
                <div class="quiz-feedback" id="quiz2-feedback"></div>
            </div>
        </div>

        <!-- SLIDE 21: Broadcast Traffic Capture -->
        <div class="slide slide-content" id="slide21">
            <h2>ğŸ” Capturing Broadcast Traffic</h2>
            <div class="code-block" data-lang="bash">
<span class="comment"># Capture UDP broadcast on port 5007</span>
$ <span class="keyword">sudo</span> tcpdump -ni eth0 <span class="string">'udp port 5007'</span>

<span class="number">14:32:15.123456</span> IP 10.0.3.1.54321 > 255.255.255.255.5007: UDP, length 15
<span class="number">14:32:16.125789</span> IP 10.0.3.1.54321 > 255.255.255.255.5007: UDP, length 15

<span class="comment"># Alternative: Use tshark for more detail</span>
$ <span class="keyword">sudo</span> tshark -ni eth0 -f <span class="string">'udp port 5007'</span> -T fields \
    -e ip.src -e ip.dst -e udp.srcport -e udp.dstport -e data.text
            </div>
            <div class="content-grid" style="margin-top: 25px;">
                <div class="card card-accent">
                    <h3>tcpdump Flags</h3>
                    <ul>
                        <li><code>-n</code> â€” don't resolve hostnames</li>
                        <li><code>-i eth0</code> â€” capture on interface</li>
                        <li><code>-w file.pcap</code> â€” write to file</li>
                        <li><code>-X</code> â€” show hex + ASCII</li>
                    </ul>
                </div>
                <div class="card card-success">
                    <h3>What You'll See</h3>
                    <ul>
                        <li>Source IP: sender's address</li>
                        <li>Dest IP: 255.255.255.255</li>
                        <li>All hosts on LAN receive it</li>
                        <li>MAC: ff:ff:ff:ff:ff:ff</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SLIDE 22: Broadcast Limitations -->
        <div class="slide slide-content" id="slide22">
            <h2>âš ï¸ Broadcast Limitations &amp; Problems</h2>
            <div class="content-grid">
                <div class="card card-danger">
                    <h3>ğŸš« Network Saturation</h3>
                    <p>Every host processes every broadcast frame, even if uninterested. In large LANs, excessive broadcasts create "broadcast storms" that degrade performance for everyone.</p>
                </div>
                <div class="card card-warning">
                    <h3>ğŸ§± No Router Crossing</h3>
                    <p>Limited broadcasts (255.255.255.255) never cross router boundaries. This is by designâ€”imagine if every broadcast reached the entire Internet!</p>
                </div>
                <div class="card card-purple">
                    <h3>ğŸ”’ Security Concerns</h3>
                    <p>Broadcasts expose traffic to all hosts on the segment. Sensitive data should never be broadcast. Malicious actors can easily sniff broadcast traffic.</p>
                </div>
            </div>
            <div class="insight-box">
                <strong>When to Avoid Broadcast:</strong>
                <ul style="margin-top: 10px;">
                    <li>Large networks (>100 hosts) â€” use multicast instead</li>
                    <li>Frequent messages â€” creates unnecessary load</li>
                    <li>Cross-subnet communication â€” use unicast or multicast</li>
                </ul>
            </div>
        </div>

        <!-- SLIDE 23: Broadcast Use Cases -->
        <div class="slide slide-content" id="slide23">
            <h2>âœ… Legitimate Broadcast Use Cases</h2>
            <div class="content-grid">
                <div class="card card-success">
                    <h3>ğŸ”§ DHCP Discovery</h3>
                    <p>Client broadcasts "Who can give me an IP?" because it doesn't know any server addresses yet. Essential bootstrapping mechanism.</p>
                </div>
                <div class="card card-accent">
                    <h3>ğŸ” ARP (Address Resolution)</h3>
                    <p>"Who has IP 10.0.3.5? Tell 10.0.3.1" â€” resolves IP addresses to MAC addresses within a LAN segment.</p>
                </div>
                <div class="card card-purple">
                    <h3>ğŸ  Service Discovery</h3>
                    <p>Protocols like mDNS (Bonjour) use broadcast/multicast to find services: "Any printers on this network?"</p>
                </div>
                <div class="card card-warning">
                    <h3>ğŸ® LAN Gaming</h3>
                    <p>Games use broadcast to discover other players on the same network without requiring a central server.</p>
                </div>
            </div>
        </div>

        <!-- SLIDE 24: Broadcast Summary -->
        <div class="slide slide-content" id="slide24">
            <h2>ğŸ“ UDP Broadcast Summary</h2>
            <div class="highlight-box">
                <strong>Key Takeaways:</strong>
                <ul style="margin-top: 10px;">
                    <li>Broadcast = one-to-all within L2 domain</li>
                    <li><code>255.255.255.255</code> = limited broadcast (stays local)</li>
                    <li><code>SO_BROADCAST</code> socket option is mandatory for senders</li>
                    <li>Receivers bind to <code>""</code> (INADDR_ANY) to capture broadcasts</li>
                    <li>Use sparingly â€” generates significant network overhead</li>
                </ul>
            </div>
            <div class="code-block" data-lang="python">
<span class="comment"># Essential broadcast pattern</span>
sock.setsockopt(socket.<span class="builtin">SOL_SOCKET</span>, socket.<span class="builtin">SO_BROADCAST</span>, <span class="number">1</span>)
sock.sendto(data, (<span class="string">"255.255.255.255"</span>, port))
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             SECTION 4: UDP MULTICAST (Slides 25-36)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

        <!-- SLIDE 25: Multicast Concept -->
        <div class="slide slide-content" id="slide25">
            <h2>ğŸ¯ UDP Multicast â€” Selective Group Communication</h2>
            <div class="definition-box">
                <strong>Definition:</strong> Multicast sends packets only to hosts that have <em>explicitly subscribed</em> to a group. Unlike broadcast, uninterested hosts don't waste resources processing the traffic.
            </div>
            <div class="ascii-diagram">
                       â”Œâ”€â”€â”€â”€â”€â”€â”
                       â”‚  h1  â”‚  SENDER â†’ group 239.1.1.1
                       â””â”€â”€â”¬â”€â”€â”€â”˜
                          â”‚
                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  SWITCH   â”‚  forwards ONLY to group members
                    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼           â–¼           â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
          â”‚  h2  â”‚    â”‚  h3  â”‚    â”‚  h4  â”‚
          â”‚ JOIN â”‚    â”‚ JOIN â”‚    â”‚ â”€â”€â”€  â”‚
          â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜
          RECEIVES    RECEIVES    NOTHING
          (member)    (member)    (not a member)

    Multicast addresses: 224.0.0.0 â€“ 239.255.255.255 (Class D)
    Membership protocol: IGMP (Internet Group Management Protocol)</div>
        </div>

        <!-- SLIDE 26: Broadcast vs Multicast -->
        <div class="slide slide-content" id="slide26">
            <h2>âš–ï¸ Broadcast vs Multicast â€” The Key Differences</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Aspect</th>
                            <th>Broadcast</th>
                            <th>Multicast</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Recipients</strong></td>
                            <td>ALL hosts in L2 domain</td>
                            <td>Only subscribed members</td>
                        </tr>
                        <tr>
                            <td><strong>Explicit Join</strong></td>
                            <td>No</td>
                            <td>Yes (<code>IP_ADD_MEMBERSHIP</code>)</td>
                        </tr>
                        <tr>
                            <td><strong>Crosses Routers</strong></td>
                            <td>No</td>
                            <td>Yes (if multicast routing enabled)</td>
                        </tr>
                        <tr>
                            <td><strong>Network Overhead</strong></td>
                            <td>High (everyone processes)</td>
                            <td>Optimised (only members)</td>
                        </tr>
                        <tr>
                            <td><strong>Destination Address</strong></td>
                            <td>255.255.255.255</td>
                            <td>224.x.x.x â€“ 239.x.x.x</td>
                        </tr>
                        <tr>
                            <td><strong>Destination MAC</strong></td>
                            <td>ff:ff:ff:ff:ff:ff</td>
                            <td>01:00:5e:xx:xx:xx</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- SLIDE 27: Multicast Addresses -->
        <div class="slide slide-content" id="slide27">
            <h2>ğŸ“ Multicast Address Ranges (Class D)</h2>
            <div class="content-grid">
                <div class="card card-accent">
                    <h3>224.0.0.x</h3>
                    <p style="font-weight: 600; color: var(--accent);">Link-Local (TTL=1)</p>
                    <ul>
                        <li>Never forwarded by routers</li>
                        <li>224.0.0.1 = all hosts on segment</li>
                        <li>224.0.0.2 = all routers</li>
                        <li>224.0.0.5 = OSPF routers</li>
                    </ul>
                </div>
                <div class="card card-success">
                    <h3>224.0.1.x â€“ 238.x.x.x</h3>
                    <p style="font-weight: 600; color: var(--success);">Globally Scoped</p>
                    <ul>
                        <li>Can be routed across Internet</li>
                        <li>Requires multicast routing (PIM)</li>
                        <li>Used for public services</li>
                        <li>IANA-registered groups</li>
                    </ul>
                </div>
                <div class="card card-purple">
                    <h3>239.x.x.x</h3>
                    <p style="font-weight: 600; color: var(--purple);">Administratively Scoped</p>
                    <ul>
                        <li>Private use (like 10.x.x.x for unicast)</li>
                        <li>Organisation-internal only</li>
                        <li><strong>Use this for experiments!</strong></li>
                        <li>Starterkit uses 239.1.1.1</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SLIDE 28: IGMP Explanation -->
        <div class="slide slide-content" id="slide28">
            <h2>ğŸ¤ IGMP: How Multicast Membership Works</h2>
            <div class="story-box">
                <strong>IGMP</strong> (Internet Group Management Protocol) is the mechanism hosts use to inform routers about their multicast group memberships. It's like raising your hand to say "I want to receive messages for this group."
            </div>
            <div class="ascii-diagram" style="font-size: 0.85rem;">
Host wants to JOIN group 239.1.1.1:

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  HOST  â”‚ â”€â”€ IGMP Membership Report â”€â”€â–ºâ”‚  ROUTER  â”‚
    â”‚        â”‚    (Join 239.1.1.1)          â”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                                              â”‚
    Router now knows to forward              â”‚
    239.1.1.1 traffic to this segment        â–¼
                                        Multicast
                                        forwarding
                                        table updated

Later, router periodically asks "Who's still interested?"

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  HOST  â”‚ â—„â”€â”€ IGMP Membership Query â”€â”€â”‚  ROUTER  â”‚
    â”‚        â”‚ â”€â”€ IGMP Report (if still) â”€â”€â–ºâ”‚          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>
        </div>

        <!-- SLIDE 29: Multicast Sender -->
        <div class="slide slide-content" id="slide29">
            <h2>ğŸ’» Multicast Sender â€” Implementation</h2>
            <div class="code-block" data-lang="python" style="font-size: 0.95rem;">
<span class="comment"># From: WEEK3/python/examples/ex02_udp_multicast.py</span>

<span class="keyword">import</span> socket

MCAST_GROUP = <span class="string">"239.1.1.1"</span>  <span class="comment"># Administratively scoped</span>
PORT = <span class="number">5001</span>
TTL = <span class="number">1</span>  <span class="comment"># 1 = link-local, doesn't cross routers</span>

<span class="comment"># Step 1: Create UDP socket</span>
sock = socket.socket(socket.<span class="builtin">AF_INET</span>, socket.<span class="builtin">SOCK_DGRAM</span>, socket.<span class="builtin">IPPROTO_UDP</span>)

<span class="comment"># Step 2: Set multicast TTL</span>
<span class="comment"># TTL controls how far the packet travels</span>
<span class="comment"># TTL=1: stays on local network (recommended for testing)</span>
<span class="comment"># TTL>1: can cross routers (requires multicast routing)</span>
sock.setsockopt(socket.<span class="builtin">IPPROTO_IP</span>, socket.<span class="builtin">IP_MULTICAST_TTL</span>, TTL)

<span class="comment"># Step 3: Send to multicast group (no special permission needed!)</span>
message = <span class="string">b"Hello multicast group!"</span>
sock.sendto(message, (MCAST_GROUP, PORT))
            </div>
            <div class="highlight-box">
                <strong>Note:</strong> Unlike broadcast, multicast senders don't need special socket options! The TTL controls scope, and receivers opt-in via IGMP.
            </div>
        </div>

        <!-- SLIDE 30: Multicast Receiver -->
        <div class="slide slide-content" id="slide30">
            <h2>ğŸ’» Multicast Receiver â€” The JOIN Process</h2>
            <div class="code-block" data-lang="python" style="font-size: 0.92rem;">
<span class="keyword">import</span> socket
<span class="keyword">import</span> struct

MCAST_GROUP = <span class="string">"239.1.1.1"</span>
PORT = <span class="number">5001</span>

<span class="comment"># Step 1: Create UDP socket</span>
sock = socket.socket(socket.<span class="builtin">AF_INET</span>, socket.<span class="builtin">SOCK_DGRAM</span>, socket.<span class="builtin">IPPROTO_UDP</span>)
sock.setsockopt(socket.<span class="builtin">SOL_SOCKET</span>, socket.<span class="builtin">SO_REUSEADDR</span>, <span class="number">1</span>)

<span class="comment"># Step 2: Bind to the port (often bind to "" or the group address)</span>
sock.bind((<span class="string">""</span>, PORT))

<span class="comment"># Step 3: JOIN the multicast group (CRITICAL!)</span>
<span class="comment"># mreq = multicast group IP (4 bytes) + interface IP (4 bytes)</span>
mreq = socket.inet_aton(MCAST_GROUP) + struct.pack(<span class="string">"=I"</span>, socket.<span class="builtin">INADDR_ANY</span>)
sock.setsockopt(socket.<span class="builtin">IPPROTO_IP</span>, socket.<span class="builtin">IP_ADD_MEMBERSHIP</span>, mreq)

<span class="comment"># Step 4: Receive multicast datagrams</span>
<span class="keyword">while</span> <span class="builtin">True</span>:
    data, sender = sock.recvfrom(<span class="number">65535</span>)
    <span class="function">print</span>(<span class="string">f"From </span>{sender}<span class="string">: </span>{data.decode()}<span class="string">"</span>)
            </div>
        </div>

        <!-- SLIDE 31: IP_ADD_MEMBERSHIP Explained -->
        <div class="slide slide-content" id="slide31">
            <h2>ğŸ” Understanding IP_ADD_MEMBERSHIP</h2>
            <div class="two-columns">
                <div>
                    <div class="protocol-header" style="flex-direction: column;">
                        <div class="header-field" style="width: 100%;">
                            <div class="field-name">mreq Structure (8 bytes total)</div>
                        </div>
                    </div>
                    <div class="protocol-header">
                        <div class="header-field span-4">
                            <div class="field-name">Multicast Group IP</div>
                            <div class="field-value">239.1.1.1</div>
                            <div class="field-bits">4 bytes</div>
                        </div>
                        <div class="header-field span-4">
                            <div class="field-name">Interface IP</div>
                            <div class="field-value">INADDR_ANY</div>
                            <div class="field-bits">4 bytes (0 = any)</div>
                        </div>
                    </div>
                    <div class="code-block" data-lang="python" style="margin-top: 20px; font-size: 0.9rem;">
<span class="comment"># Building the mreq structure</span>
mreq = socket.inet_aton(<span class="string">"239.1.1.1"</span>)  <span class="comment"># Group IP as bytes</span>
mreq += struct.pack(<span class="string">"=I"</span>, socket.<span class="builtin">INADDR_ANY</span>)  <span class="comment"># Interface</span>

<span class="comment"># Or for a specific interface:</span>
mreq = socket.inet_aton(<span class="string">"239.1.1.1"</span>)
mreq += socket.inet_aton(<span class="string">"10.0.3.2"</span>)  <span class="comment"># Join on this interface</span>
                    </div>
                </div>
                <div>
                    <div class="highlight-box">
                        <strong>What Happens When You JOIN:</strong>
                        <ul style="margin-top: 10px;">
                            <li>Kernel sends IGMP Membership Report</li>
                            <li>Switch/router learns to forward group traffic</li>
                            <li>NIC is configured to accept the multicast MAC</li>
                            <li>Socket can now receive group datagrams</li>
                        </ul>
                    </div>
                    <div class="warning-box">
                        <strong>Common Pitfall:</strong> Forgetting to JOIN means you'll never receive multicast packets, even if you're bound to the correct port!
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 32: Multicast TTL -->
        <div class="slide slide-content" id="slide32">
            <h2>ğŸ”¢ Multicast TTL â€” Controlling Scope</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>TTL Value</th>
                            <th>Scope</th>
                            <th>Use Case</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>0</strong></td>
                            <td>Same host only</td>
                            <td>Loopback testing</td>
                        </tr>
                        <tr>
                            <td><strong>1</strong></td>
                            <td>Same subnet (link-local)</td>
                            <td>LAN discovery, testing</td>
                        </tr>
                        <tr>
                            <td><strong>32</strong></td>
                            <td>Same site/campus</td>
                            <td>Organisation-internal</td>
                        </tr>
                        <tr>
                            <td><strong>64</strong></td>
                            <td>Same region</td>
                            <td>Regional services</td>
                        </tr>
                        <tr>
                            <td><strong>128</strong></td>
                            <td>Same continent</td>
                            <td>Wide-area services</td>
                        </tr>
                        <tr>
                            <td><strong>255</strong></td>
                            <td>Unrestricted (global)</td>
                            <td>Internet-wide multicast</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="highlight-box">
                <strong>Starterkit Default:</strong> We use <code>TTL=1</code> to ensure multicast stays within the Mininet virtual network. This prevents accidental traffic leakage.
            </div>
        </div>

        <!-- SLIDE 33: Quiz - Multicast -->
        <div class="slide slide-content" id="slide33">
            <h2>ğŸ§  Knowledge Check: Multicast</h2>
            <div class="quiz-container">
                <div class="quiz-question">You've set up a multicast sender correctly, but your receiver gets no packets. The receiver binds to the right port and calls <code>recvfrom()</code>. What's most likely missing?</div>
                <div class="quiz-option" onclick="checkQuiz(this, false, 'quiz3')">The sender forgot to set SO_BROADCAST</div>
                <div class="quiz-option" onclick="checkQuiz(this, true, 'quiz3')">The receiver forgot to call IP_ADD_MEMBERSHIP to join the group</div>
                <div class="quiz-option" onclick="checkQuiz(this, false, 'quiz3')">Multicast requires TCP, not UDP</div>
                <div class="quiz-feedback" id="quiz3-feedback"></div>
            </div>
        </div>

        <!-- SLIDE 34: Verify Multicast -->
        <div class="slide slide-content" id="slide34">
            <h2>ğŸ” Verifying Multicast Membership</h2>
            <div class="code-block" data-lang="bash">
<span class="comment"># Check multicast group memberships on an interface</span>
$ ip maddr show dev eth0
2:  eth0
    link  01:00:5e:01:01:01        <span class="comment"># Multicast MAC</span>
    inet  239.1.1.1                 <span class="comment"># Multicast IP group</span>
    inet6 ff02::1                   <span class="comment"># IPv6 all-nodes</span>

<span class="comment"># Watch IGMP traffic</span>
$ <span class="keyword">sudo</span> tcpdump -ni eth0 <span class="string">'igmp'</span>
14:45:22.123 IP 10.0.3.2 > 239.1.1.1: igmp v2 report 239.1.1.1
14:46:22.456 IP 10.0.3.1 > 224.0.0.1: igmp query v2

<span class="comment"># Capture multicast and IGMP together</span>
$ <span class="keyword">sudo</span> tcpdump -ni eth0 <span class="string">'igmp or (udp port 5001)'</span>
            </div>
            <div class="highlight-box">
                <strong>Troubleshooting Tip:</strong> If <code>ip maddr show</code> doesn't list your group after running the receiver, the JOIN failed. Check firewall rules and verify the interface is up.
            </div>
        </div>

        <!-- SLIDE 35: Multicast vs Broadcast Summary -->
        <div class="slide slide-content" id="slide35">
            <h2>âš–ï¸ When to Use Each?</h2>
            <div class="two-columns">
                <div class="card card-accent">
                    <h3>âœ… Use Broadcast When:</h3>
                    <ul>
                        <li>You need to reach <em>everyone</em> on the LAN</li>
                        <li>Receivers can't subscribe in advance (DHCP)</li>
                        <li>Network is small (&lt;50 hosts)</li>
                        <li>Messages are infrequent</li>
                        <li>Simplicity trumps efficiency</li>
                    </ul>
                </div>
                <div class="card card-success">
                    <h3>âœ… Use Multicast When:</h3>
                    <ul>
                        <li>Only interested parties should receive</li>
                        <li>Traffic needs to cross subnets</li>
                        <li>High-frequency messaging (streaming)</li>
                        <li>Large networks with many hosts</li>
                        <li>Bandwidth efficiency matters</li>
                    </ul>
                </div>
            </div>
            <div class="insight-box">
                <strong>Real-World Examples:</strong> IPTV uses multicast to efficiently deliver the same TV channel to thousands of subscribers. Video game servers use broadcast for LAN discovery but multicast for in-game group communication.
            </div>
        </div>

        <!-- SLIDE 36: Multicast Summary -->
        <div class="slide slide-content" id="slide36">
            <h2>ğŸ“ UDP Multicast Summary</h2>
            <div class="highlight-box">
                <strong>Key Takeaways:</strong>
                <ul style="margin-top: 10px;">
                    <li>Multicast = one-to-many for subscribed members only</li>
                    <li>Address range: 224.0.0.0 â€“ 239.255.255.255</li>
                    <li>Use 239.x.x.x for private/organisational groups</li>
                    <li><code>IP_ADD_MEMBERSHIP</code> is required for receivers</li>
                    <li>TTL controls how far packets travel</li>
                    <li>IGMP manages group membership</li>
                </ul>
            </div>
            <div class="code-block" data-lang="python">
<span class="comment"># Essential multicast receiver pattern</span>
mreq = socket.inet_aton(<span class="string">"239.1.1.1"</span>) + struct.pack(<span class="string">"=I"</span>, socket.<span class="builtin">INADDR_ANY</span>)
sock.setsockopt(socket.<span class="builtin">IPPROTO_IP</span>, socket.<span class="builtin">IP_ADD_MEMBERSHIP</span>, mreq)
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             SECTION 5: TCP TUNNELLING (Slides 37-46)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

        <!-- SLIDE 37: Tunnel Concept -->
        <div class="slide slide-content" id="slide37">
            <h2>ğŸš‡ TCP Tunnelling â€” Port Forwarding</h2>
            <div class="definition-box">
                <strong>Definition:</strong> A TCP tunnel accepts incoming connections on one port and forwards the data to another destination. It acts as an intermediary, enabling communication between endpoints that cannot directly reach each other.
            </div>
            <div class="ascii-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENT  â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚           TUNNEL               â”‚â”€â”€â”€â”€â”€â”€â–ºâ”‚  SERVER  â”‚
â”‚   (a1)   â”‚       â”‚  accept() â”€â”€â–º connect(target)  â”‚       â”‚   (b1)   â”‚
â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”‚  â—„â”€â”€ bidirectional forward â”€â”€â–º â”‚â—„â”€â”€â”€â”€â”€â”€â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 10.0.1.1             r1:9090 â”€â”€â”€â”€â”€â”€â–º 10.0.2.1:8080          10.0.2.1

 Client connects to tunnel at r1:9090
 Tunnel opens connection to real server at b1:8080
 Data flows both directions through the tunnel</div>
        </div>

        <!-- SLIDE 38: Use Cases -->
        <div class="slide slide-content" id="slide38">
            <h2>ğŸ¯ Why Use TCP Tunnels?</h2>
            <div class="content-grid">
                <div class="card card-accent">
                    <h3>ğŸŒ NAT Traversal</h3>
                    <p>Expose a service from a private network to external clients without opening firewall ports directly to the server.</p>
                </div>
                <div class="card card-success">
                    <h3>âš–ï¸ Load Balancing</h3>
                    <p>Distribute incoming connections across multiple backend servers (basic round-robin or health-based).</p>
                </div>
                <div class="card card-purple">
                    <h3>ğŸ” Traffic Debugging</h3>
                    <p>Intercept and log traffic flowing through the tunnel for analysis without modifying client or server.</p>
                </div>
                <div class="card card-warning">
                    <h3>ğŸ”„ Protocol Adaptation</h3>
                    <p>Bridge different network segments or adapt between protocols (e.g., SSL termination proxies).</p>
                </div>
            </div>
            <div class="story-box">
                <strong>Real Example:</strong> SSH tunnels (<code>ssh -L</code>) use this exact pattern. When you tunnel a database connection through SSH, you're creating a TCP forwarder that encrypts traffic.
            </div>
        </div>

        <!-- SLIDE 39: Architecture -->
        <div class="slide slide-content" id="slide39">
            <h2>ğŸ—ï¸ Tunnel Architecture â€” Bidirectional Forwarding</h2>
            <p class="section-intro">A TCP tunnel needs two threads for full-duplex communication:</p>
            <div class="ascii-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TCP TUNNEL PROCESS                        â”‚
â”‚                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚    â”‚    Thread 1       â”‚         â”‚    Thread 2       â”‚          â”‚
â”‚    â”‚  client â†’ target  â”‚         â”‚  target â†’ client  â”‚          â”‚
â”‚    â”‚                   â”‚         â”‚                   â”‚          â”‚
â”‚    â”‚  recv(client)     â”‚         â”‚  recv(target)     â”‚          â”‚
â”‚    â”‚  sendall(target)  â”‚         â”‚  sendall(client)  â”‚          â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚              â”‚                             â”‚                     â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                         â”‚                                        â”‚
â”‚                   Both threads                                   â”‚
â”‚                   run in parallel                                â”‚
â”‚                   for full-duplex                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>
            <div class="highlight-box">
                <strong>Why Two Threads?</strong> TCP is full-duplex, meaning data can flow in both directions simultaneously. A single thread would block on <code>recv()</code>, unable to send data in the other direction.
            </div>
        </div>

        <!-- SLIDE 40: Forward Stream Function -->
        <div class="slide slide-content" id="slide40">
            <h2>ğŸ’» Core Pattern: Unidirectional Forwarding</h2>
            <div class="code-block" data-lang="python" style="font-size: 0.92rem;">
<span class="comment"># From: WEEK3/python/examples/ex03_tcp_tunnel.py</span>

<span class="keyword">def</span> <span class="function">forward_stream</span>(src, dst, direction, on_close):
    <span class="string">"""Copy data from src socket to dst socket until connection closes."""</span>
    total_bytes = <span class="number">0</span>
    
    <span class="keyword">try</span>:
        <span class="keyword">while</span> <span class="keyword">not</span> on_close.is_set():
            <span class="comment"># Read from source</span>
            data = src.recv(<span class="number">4096</span>)
            
            <span class="keyword">if</span> <span class="keyword">not</span> data:
                <span class="comment"># 0 bytes = peer closed connection</span>
                <span class="function">print</span>(<span class="string">f"</span>{direction}<span class="string">: Connection closed"</span>)
                <span class="keyword">break</span>
            
            <span class="comment"># Write to destination</span>
            dst.sendall(data)
            total_bytes += <span class="function">len</span>(data)
            
    <span class="keyword">except</span> (ConnectionResetError, BrokenPipeError):
        <span class="function">print</span>(<span class="string">f"</span>{direction}<span class="string">: Connection reset"</span>)
    <span class="keyword">finally</span>:
        on_close.set()  <span class="comment"># Signal other thread to stop</span>
            </div>
        </div>

        <!-- SLIDE 41: Handle Client Function -->
        <div class="slide slide-content" id="slide41">
            <h2>ğŸ’» Client Handler â€” Connecting the Streams</h2>
            <div class="code-block" data-lang="python" style="font-size: 0.88rem;">
<span class="keyword">import</span> threading

<span class="keyword">def</span> <span class="function">handle_client</span>(client_sock, target_host, target_port):
    <span class="string">"""Handle one client: connect to target, forward bidirectionally."""</span>
    
    <span class="comment"># Step 1: Connect to the actual target server</span>
    target_sock = socket.socket(socket.<span class="builtin">AF_INET</span>, socket.<span class="builtin">SOCK_STREAM</span>)
    target_sock.settimeout(<span class="number">10.0</span>)
    target_sock.connect((target_host, target_port))
    target_sock.settimeout(<span class="builtin">None</span>)
    
    <span class="comment"># Step 2: Event to coordinate thread shutdown</span>
    close_event = threading.Event()
    
    <span class="comment"># Step 3: Start two forwarding threads</span>
    t1 = threading.Thread(target=forward_stream, 
                          args=(client_sock, target_sock, <span class="string">"clientâ†’target"</span>, close_event))
    t2 = threading.Thread(target=forward_stream,
                          args=(target_sock, client_sock, <span class="string">"targetâ†’client"</span>, close_event))
    
    t1.start()
    t2.start()
    
    <span class="comment"># Step 4: Wait for both directions to finish</span>
    t1.join()
    t2.join()
    
    <span class="comment"># Step 5: Clean up</span>
    client_sock.close()
    target_sock.close()
            </div>
        </div>

        <!-- SLIDE 42: Main Accept Loop -->
        <div class="slide slide-content" id="slide42">
            <h2>ğŸ’» Main Server Loop â€” Accept and Dispatch</h2>
            <div class="code-block" data-lang="python" style="font-size: 0.92rem;">
<span class="keyword">def</span> <span class="function">run_tunnel</span>(listen_port, target_host, target_port):
    <span class="string">"""Main tunnel server accepting connections."""</span>
    
    <span class="comment"># Create server socket</span>
    server = socket.socket(socket.<span class="builtin">AF_INET</span>, socket.<span class="builtin">SOCK_STREAM</span>)
    server.setsockopt(socket.<span class="builtin">SOL_SOCKET</span>, socket.<span class="builtin">SO_REUSEADDR</span>, <span class="number">1</span>)
    server.bind((<span class="string">"0.0.0.0"</span>, listen_port))
    server.listen(<span class="number">10</span>)
    
    <span class="function">print</span>(<span class="string">f"Tunnel listening on :</span>{listen_port}<span class="string"> â†’ </span>{target_host}<span class="string">:</span>{target_port}<span class="string">"</span>)
    
    <span class="keyword">while</span> <span class="builtin">True</span>:
        client_sock, client_addr = server.accept()
        <span class="function">print</span>(<span class="string">f"New connection from </span>{client_addr}<span class="string">"</span>)
        
        <span class="comment"># Handle each client in a separate thread</span>
        t = threading.Thread(target=handle_client,
                             args=(client_sock, target_host, target_port),
                             daemon=<span class="builtin">True</span>)
        t.start()
            </div>
            <p style="margin-top: 15px; font-size: 0.95rem; color: var(--text-muted);">
                <strong>ğŸ“ Full implementation:</strong> <code>WEEK3/python/examples/ex03_tcp_tunnel.py</code>
            </p>
        </div>

        <!-- SLIDE 43: Running the Tunnel -->
        <div class="slide slide-content" id="slide43">
            <h2>ğŸš€ Running the Tunnel in Mininet</h2>
            <div class="code-block" data-lang="bash">
<span class="comment"># Terminal 1: Start an echo server on b1 (target)</span>
mininet> <span class="keyword">b1</span> python3 ex04_echo_server.py --listen 0.0.0.0:8080

<span class="comment"># Terminal 2: Start the tunnel on r1 (router)</span>
mininet> <span class="keyword">r1</span> python3 ex03_tcp_tunnel.py --listen 0.0.0.0:9090 --target 10.0.2.1:8080

<span class="comment"># Terminal 3: Connect from a1 (client) through the tunnel</span>
mininet> <span class="keyword">a1</span> echo "Hello through tunnel!" | nc 10.0.1.254 9090 -w 2

<span class="comment"># What happens:</span>
<span class="comment"># 1. a1 connects to r1:9090 (tunnel)</span>
<span class="comment"># 2. Tunnel connects to b1:8080 (echo server)</span>
<span class="comment"># 3. "Hello through tunnel!" flows: a1 â†’ r1 â†’ b1</span>
<span class="comment"># 4. Echo response flows: b1 â†’ r1 â†’ a1</span>
            </div>
            <div class="highlight-box">
                <strong>Network Topology:</strong> a1 (10.0.1.1) â†’ r1 (10.0.1.254 / 10.0.2.254) â†’ b1 (10.0.2.1)
            </div>
        </div>

        <!-- SLIDE 44: Observing Tunnel Traffic -->
        <div class="slide slide-content" id="slide44">
            <h2>ğŸ” Observing Tunnel Traffic</h2>
            <div class="code-block" data-lang="bash">
<span class="comment"># Capture on r1 to see both sides of the tunnel</span>
mininet> <span class="keyword">r1</span> tcpdump -ni any 'tcp port 9090 or tcp port 8080' -X

<span class="comment"># You'll see TWO connections:</span>
<span class="comment"># Connection 1: a1:54321 â†’ r1:9090 (client to tunnel)</span>
<span class="comment"># Connection 2: r1:54322 â†’ b1:8080 (tunnel to server)</span>

<span class="comment"># The tunnel has its own ephemeral port for the outbound connection!</span>

14:55:01.123 IP 10.0.1.1.54321 > 10.0.1.254.9090: Flags [P.], seq 1:22
14:55:01.125 IP 10.0.2.254.54322 > 10.0.2.1.8080: Flags [P.], seq 1:22
            </div>
            <div class="warning-box">
                <strong>Observation:</strong> Notice the source IP changes! The server (b1) sees traffic coming from r1, not a1. This is why tunnels can be used to hide the original client IP.
            </div>
        </div>

        <!-- SLIDE 45: Threading Event -->
        <div class="slide slide-content" id="slide45">
            <h2>ğŸ”„ Coordinating Thread Shutdown</h2>
            <div class="story-box">
                When one direction closes (e.g., client sends FIN), we need to stop the other thread too. The <code>threading.Event</code> provides a simple signalling mechanism.
            </div>
            <div class="two-columns">
                <div class="code-block" data-lang="python" style="font-size: 0.9rem;">
<span class="keyword">import</span> threading

<span class="comment"># Create a shared event</span>
close_event = threading.Event()

<span class="comment"># In forward_stream:</span>
<span class="keyword">while</span> <span class="keyword">not</span> close_event.is_set():
    data = src.recv(<span class="number">4096</span>)
    <span class="keyword">if</span> <span class="keyword">not</span> data:
        <span class="keyword">break</span>
    dst.sendall(data)

<span class="comment"># When loop exits:</span>
close_event.set()  <span class="comment"># Signal sibling thread</span>
                </div>
                <div>
                    <div class="highlight-box">
                        <strong>How It Works:</strong>
                        <ul style="margin-top: 10px;">
                            <li><code>Event()</code> â€” creates shared flag</li>
                            <li><code>is_set()</code> â€” check if signalled</li>
                            <li><code>set()</code> â€” signal other threads</li>
                            <li>Thread-safe, no locks needed</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 46: Tunnel Summary -->
        <div class="slide slide-content" id="slide46">
            <h2>ğŸ“ TCP Tunnelling Summary</h2>
            <div class="highlight-box">
                <strong>Key Takeaways:</strong>
                <ul style="margin-top: 10px;">
                    <li>TCP tunnels forward connections between endpoints</li>
                    <li>Two threads required for full-duplex forwarding</li>
                    <li><code>accept()</code> on listen side, <code>connect()</code> to target</li>
                    <li><code>threading.Event</code> coordinates shutdown</li>
                    <li>Use cases: NAT traversal, load balancing, debugging</li>
                </ul>
            </div>
            <div class="content-grid" style="margin-top: 25px;">
                <div class="card card-success">
                    <h3>Pattern Summary</h3>
                    <p style="font-family: 'JetBrains Mono', monospace; font-size: 0.9rem;">
                        listen() â†’ accept() â†’ connect(target) â†’ spawn threads â†’ forward â†”
                    </p>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             SECTION 6: TROUBLESHOOTING & WRAP-UP (Slides 47-52)
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->

        <!-- SLIDE 47: Common Errors -->
        <div class="slide slide-content" id="slide47">
            <h2>ğŸ› Common Errors &amp; Solutions</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Error</th>
                            <th>Cause</th>
                            <th>Solution</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>Permission denied</code> on broadcast</td>
                            <td>SO_BROADCAST not set</td>
                            <td><code>sock.setsockopt(SOL_SOCKET, SO_BROADCAST, 1)</code></td>
                        </tr>
                        <tr>
                            <td>Multicast not received</td>
                            <td>Receiver didn't JOIN</td>
                            <td>Verify with <code>ip maddr show</code></td>
                        </tr>
                        <tr>
                            <td><code>Address already in use</code></td>
                            <td>Port still in TIME_WAIT</td>
                            <td><code>SO_REUSEADDR</code> or wait 60s</td>
                        </tr>
                        <tr>
                            <td>Mininet stuck</td>
                            <td>Previous session not cleaned</td>
                            <td><code>sudo mn -c</code></td>
                        </tr>
                        <tr>
                            <td>Tunnel timeout</td>
                            <td>Missing routes</td>
                            <td>Check <code>ip route</code> on all hosts</td>
                        </tr>
                        <tr>
                            <td><code>Connection refused</code></td>
                            <td>Target server not running</td>
                            <td>Start server first, check port</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- SLIDE 48: Reveal - Analogy -->
        <div class="slide slide-content" id="slide48">
            <h2>ğŸ’­ Analogy: Postal System</h2>
            <div class="reveal-container" style="max-width: 850px; margin: 0 auto;">
                <div class="reveal-question">
                    How would you explain TCP vs UDP, broadcast vs multicast to a non-technical person?
                </div>
                <button class="reveal-btn" onclick="toggleReveal('reveal1')">Reveal the Analogy</button>
                <div class="reveal-content" id="reveal1">
                    <div class="icon-box">
                        <span class="icon">ğŸ“</span>
                        <div class="icon-box-content"><strong>TCP = Phone Call</strong><br>You dial, wait for answer ("Hello?"), confirm they can hear you, speak in turns, and hang up when finished. If the line drops, you know immediately.</div>
                    </div>
                    <div class="icon-box">
                        <span class="icon">ğŸ“¬</span>
                        <div class="icon-box-content"><strong>UDP = Postcard</strong><br>Write your message, add the address, drop it in the post. No confirmation it arrived, no guaranteed order, but it's quick and cheap.</div>
                    </div>
                    <div class="icon-box">
                        <span class="icon">ğŸ“¡</span>
                        <div class="icon-box-content"><strong>Broadcast = Town Square Megaphone</strong><br>Everyone in the square hears your message, whether they want to or not. Effective for announcements, but annoying if overused.</div>
                    </div>
                    <div class="icon-box">
                        <span class="icon">ğŸ¯</span>
                        <div class="icon-box-content"><strong>Multicast = WhatsApp Group</strong><br>Only people who've joined the group receive messages. Others aren't bothered. Efficient for reaching interested parties.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 49: Quiz - QUIC -->
        <div class="slide slide-content" id="slide49">
            <h2>ğŸ§  Critical Thinking: QUIC Protocol</h2>
            <div class="highlight-box">
                <strong>Context:</strong> Google developed the QUIC protocol (now HTTP/3) which runs over UDP but provides TCP-like reliability. Why would they rebuild TCP's features on top of UDP?
            </div>
            <div class="quiz-container" style="margin-top: 25px;">
                <div class="quiz-question">What's the main advantage of QUIC over traditional TCP?</div>
                <div class="quiz-option" onclick="checkQuiz(this, false, 'quiz4')">UDP is inherently more secure than TCP</div>
                <div class="quiz-option" onclick="checkQuiz(this, true, 'quiz4')">Eliminates handshake latency and head-of-line blocking</div>
                <div class="quiz-option" onclick="checkQuiz(this, false, 'quiz4')">UDP supports broadcast which HTTP needs</div>
                <div class="quiz-feedback" id="quiz4-feedback"></div>
            </div>
        </div>

        <!-- SLIDE 50: Summary -->
        <div class="slide slide-content" id="slide50">
            <h2>ğŸ“‹ Session Summary</h2>
            <div class="content-grid">
                <div class="card card-accent">
                    <h3>ğŸ”Œ Sockets</h3>
                    <ul>
                        <li>Communication endpoint</li>
                        <li>SOCK_STREAM = TCP</li>
                        <li>SOCK_DGRAM = UDP</li>
                        <li>5-tuple identifies connection</li>
                    </ul>
                </div>
                <div class="card card-success">
                    <h3>ğŸ“¡ Broadcast</h3>
                    <ul>
                        <li>One-to-all in L2 domain</li>
                        <li>255.255.255.255 (limited)</li>
                        <li>Requires SO_BROADCAST</li>
                        <li>Never crosses routers</li>
                    </ul>
                </div>
                <div class="card card-purple">
                    <h3>ğŸ¯ Multicast</h3>
                    <ul>
                        <li>One-to-subscribed-group</li>
                        <li>224.x â€“ 239.x addresses</li>
                        <li>JOIN with IP_ADD_MEMBERSHIP</li>
                        <li>TTL controls scope</li>
                    </ul>
                </div>
                <div class="card card-danger">
                    <h3>ğŸš‡ TCP Tunnel</h3>
                    <ul>
                        <li>Port forwarding proxy</li>
                        <li>2 threads for full-duplex</li>
                        <li>NAT traversal, debugging</li>
                        <li>Event-based shutdown</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SLIDE 51: Next Steps -->
        <div class="slide slide-content" id="slide51">
            <h2>ğŸ”® Looking Ahead</h2>
            <div class="two-columns">
                <div>
                    <h3 style="color: var(--secondary-dark); margin-bottom: 20px;">ğŸ“š Next Week: Physical &amp; Data Link Layers</h3>
                    <ul>
                        <li>Ethernet frame structure</li>
                        <li>MAC addresses and ARP</li>
                        <li>Switching and VLANs</li>
                        <li>Collision domains vs broadcast domains</li>
                    </ul>
                    <div class="highlight-box" style="margin-top: 20px;">
                        <strong>Connection:</strong> Today's broadcast behaviour (ff:ff:ff:ff:ff:ff) will make more sense once we explore Layer 2 addressing!
                    </div>
                </div>
                <div>
                    <h3 style="color: var(--success-dark); margin-bottom: 20px;">ğŸ§ª This Week's Lab</h3>
                    <ul>
                        <li>Run broadcast sender/receiver in Mininet</li>
                        <li>Set up multicast groups with JOIN</li>
                        <li>Build and test the TCP tunnel</li>
                        <li>Capture and analyse traffic with tcpdump</li>
                    </ul>
                    <div class="code-block" data-lang="bash" style="margin-top: 20px; font-size: 0.9rem;">
<span class="comment"># Get started:</span>
cd ~/WEEK3
make setup && make verify
<span class="keyword">sudo</span> ./scripts/run_all.sh
                    </div>
                </div>
            </div>
        </div>

        <!-- SLIDE 52: Final -->
        <div class="slide slide-title" id="slide52">
            <h1>ğŸ¯ Ready for the Laboratory</h1>
            <div class="subtitle">Apply these concepts with the WEEK3 starterkit</div>
            <div class="meta" style="margin-top: 45px;">
                <code style="background: rgba(255,255,255,0.15); padding: 14px 28px; border-radius: 12px; font-size: 1.1rem;">
                    cd ~/WEEK3 && make verify
                </code>
            </div>
            <div class="meta" style="margin-top: 30px; opacity: 0.7;">
                Questions? Feedback? Use the thumbs-down button or speak with your seminar instructor.
            </div>
        </div>

    </div>

    <!-- Navigation -->
    <div class="nav-container">
        <button class="nav-btn" id="prevBtn" onclick="changeSlide(-1)">â—€ Previous</button>
        <button class="nav-btn toc-btn" onclick="toggleTOC()">â˜° Contents</button>
        <button class="nav-btn" id="nextBtn" onclick="changeSlide(1)">Next â–¶</button>
        <button class="nav-btn fullscreen-btn" onclick="toggleFullscreen()">â›¶</button>
    </div>

    <!-- Table of Contents Modal -->
    <div class="toc-modal" id="tocModal">
        <div class="toc-content">
            <button class="toc-close" onclick="toggleTOC()">âœ•</button>
            <h2>Table of Contents</h2>
            
            <div class="toc-section">
                <div class="toc-section-title">1. Introduction</div>
                <div class="toc-item" onclick="goToSlide(1)">Title Slide</div>
                <div class="toc-item" onclick="goToSlide(2)">Historical Context</div>
                <div class="toc-item" onclick="goToSlide(3)">Learning Objectives</div>
                <div class="toc-item" onclick="goToSlide(4)">Course Roadmap</div>
                <div class="toc-item" onclick="goToSlide(5)">Why This Matters</div>
                <div class="toc-item" onclick="goToSlide(6)">Today's Agenda</div>
            </div>
            
            <div class="toc-section">
                <div class="toc-section-title">2. Socket Fundamentals</div>
                <div class="toc-item" onclick="goToSlide(7)">What Is a Socket?</div>
                <div class="toc-item" onclick="goToSlide(8)">Socket Addressing</div>
                <div class="toc-item" onclick="goToSlide(9)">TCP vs UDP Visual</div>
                <div class="toc-item" onclick="goToSlide(10)">TCP vs UDP Comparison</div>
                <div class="toc-item" onclick="goToSlide(11)">Quiz: Protocol Selection</div>
                <div class="toc-item" onclick="goToSlide(12)">Socket API Lifecycle</div>
                <div class="toc-item" onclick="goToSlide(13)">TCP Server Code</div>
                <div class="toc-item" onclick="goToSlide(14)">C Perspective</div>
            </div>
            
            <div class="toc-section">
                <div class="toc-section-title">3. UDP Broadcast</div>
                <div class="toc-item" onclick="goToSlide(15)">Broadcast Concept</div>
                <div class="toc-item" onclick="goToSlide(16)">Broadcast Addresses</div>
                <div class="toc-item" onclick="goToSlide(17)">SO_BROADCAST</div>
                <div class="toc-item" onclick="goToSlide(18)">Broadcast Sender</div>
                <div class="toc-item" onclick="goToSlide(19)">Broadcast Receiver</div>
                <div class="toc-item" onclick="goToSlide(20)">Quiz: Broadcast</div>
                <div class="toc-item" onclick="goToSlide(21)">Traffic Capture</div>
                <div class="toc-item" onclick="goToSlide(22)">Limitations</div>
                <div class="toc-item" onclick="goToSlide(23)">Use Cases</div>
                <div class="toc-item" onclick="goToSlide(24)">Summary</div>
            </div>
            
            <div class="toc-section">
                <div class="toc-section-title">4. UDP Multicast</div>
                <div class="toc-item" onclick="goToSlide(25)">Multicast Concept</div>
                <div class="toc-item" onclick="goToSlide(26)">Broadcast vs Multicast</div>
                <div class="toc-item" onclick="goToSlide(27)">Address Ranges</div>
                <div class="toc-item" onclick="goToSlide(28)">IGMP Protocol</div>
                <div class="toc-item" onclick="goToSlide(29)">Multicast Sender</div>
                <div class="toc-item" onclick="goToSlide(30)">Multicast Receiver</div>
                <div class="toc-item" onclick="goToSlide(31)">IP_ADD_MEMBERSHIP</div>
                <div class="toc-item" onclick="goToSlide(32)">Multicast TTL</div>
                <div class="toc-item" onclick="goToSlide(33)">Quiz: Multicast</div>
                <div class="toc-item" onclick="goToSlide(34)">Verifying Membership</div>
                <div class="toc-item" onclick="goToSlide(35)">When to Use Each</div>
                <div class="toc-item" onclick="goToSlide(36)">Summary</div>
            </div>
            
            <div class="toc-section">
                <div class="toc-section-title">5. TCP Tunnelling</div>
                <div class="toc-item" onclick="goToSlide(37)">Tunnel Concept</div>
                <div class="toc-item" onclick="goToSlide(38)">Use Cases</div>
                <div class="toc-item" onclick="goToSlide(39)">Architecture</div>
                <div class="toc-item" onclick="goToSlide(40)">Forward Stream</div>
                <div class="toc-item" onclick="goToSlide(41)">Client Handler</div>
                <div class="toc-item" onclick="goToSlide(42)">Accept Loop</div>
                <div class="toc-item" onclick="goToSlide(43)">Running in Mininet</div>
                <div class="toc-item" onclick="goToSlide(44)">Observing Traffic</div>
                <div class="toc-item" onclick="goToSlide(45)">Thread Coordination</div>
                <div class="toc-item" onclick="goToSlide(46)">Summary</div>
            </div>
            
            <div class="toc-section">
                <div class="toc-section-title">6. Wrap-up</div>
                <div class="toc-item" onclick="goToSlide(47)">Common Errors</div>
                <div class="toc-item" onclick="goToSlide(48)">Analogy</div>
                <div class="toc-item" onclick="goToSlide(49)">Quiz: QUIC</div>
                <div class="toc-item" onclick="goToSlide(50)">Session Summary</div>
                <div class="toc-item" onclick="goToSlide(51)">Next Steps</div>
                <div class="toc-item" onclick="goToSlide(52)">Final Slide</div>
            </div>
        </div>
    </div>

    <script>
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  NAVIGATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        let currentSlide = 1;
        const totalSlides = 52;

        function showSlide(n) {
            const slides = document.querySelectorAll('.slide');
            if (n < 1) n = 1;
            if (n > totalSlides) n = totalSlides;
            currentSlide = n;

            slides.forEach((slide, index) => {
                slide.classList.remove('active');
                if (index === n - 1) slide.classList.add('active');
            });

            document.getElementById('currentSlide').textContent = n;
            document.getElementById('prevBtn').disabled = (n === 1);
            document.getElementById('nextBtn').disabled = (n === totalSlides);
            document.getElementById('progressBar').style.width = ((n / totalSlides) * 100) + '%';
            
            // Update URL hash for bookmarking (wrapped in try-catch for iframe contexts)
            try {
                history.replaceState(null, null, '#slide' + n);
            } catch (e) {
                // Ignore SecurityError in sandboxed iframes
            }
        }

        function changeSlide(delta) {
            showSlide(currentSlide + delta);
        }

        function goToSlide(n) {
            showSlide(n);
            toggleTOC();
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  KEYBOARD SHORTCUTS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        document.addEventListener('keydown', (e) => {
            // Don't trigger if typing in an input
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') return;
            
            switch(e.key) {
                case 'ArrowRight':
                case ' ':
                    e.preventDefault();
                    changeSlide(1);
                    break;
                case 'ArrowLeft':
                    e.preventDefault();
                    changeSlide(-1);
                    break;
                case 'Home':
                    e.preventDefault();
                    showSlide(1);
                    break;
                case 'End':
                    e.preventDefault();
                    showSlide(totalSlides);
                    break;
                case 'f':
                case 'F':
                    toggleFullscreen();
                    break;
                case 't':
                case 'T':
                    toggleTOC();
                    break;
                case 'Escape':
                    const tocModal = document.getElementById('tocModal');
                    if (tocModal.classList.contains('show')) {
                        toggleTOC();
                    }
                    break;
            }
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  FULLSCREEN
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log('Fullscreen not available:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  TABLE OF CONTENTS
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function toggleTOC() {
            const tocModal = document.getElementById('tocModal');
            tocModal.classList.toggle('show');
        }

        // Close TOC when clicking outside
        document.getElementById('tocModal').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleTOC();
            }
        });

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  QUIZ FUNCTIONALITY
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function checkQuiz(element, isCorrect, quizId) {
            const options = element.parentElement.querySelectorAll('.quiz-option');
            const feedback = document.getElementById(quizId + '-feedback');

            // Disable all options
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                opt.classList.remove('correct', 'incorrect');
            });

            if (isCorrect) {
                element.classList.add('correct');
                feedback.className = 'quiz-feedback show correct';
                feedback.innerHTML = 'âœ… <strong>Correct!</strong> Well reasoned.';
            } else {
                element.classList.add('incorrect');
                // Highlight correct answer
                options.forEach(opt => {
                    if (opt.onclick && opt.onclick.toString().includes('true')) {
                        opt.classList.add('correct');
                    }
                });
                feedback.className = 'quiz-feedback show incorrect';
                feedback.innerHTML = 'âŒ <strong>Not quite.</strong> The correct answer is highlighted in green.';
            }
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  REVEAL FUNCTIONALITY
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        function toggleReveal(id) {
            const content = document.getElementById(id);
            const btn = content.previousElementSibling;
            content.classList.toggle('show');
            btn.textContent = content.classList.contains('show') ? 'Hide' : 'Reveal the Analogy';
        }

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        //  INITIALISATION
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('totalSlides').textContent = totalSlides;
            
            // Check for hash in URL
            const hash = window.location.hash;
            if (hash && hash.startsWith('#slide')) {
                const slideNum = parseInt(hash.replace('#slide', ''));
                if (slideNum >= 1 && slideNum <= totalSlides) {
                    showSlide(slideNum);
                    return;
                }
            }
            showSlide(1);
        });
    </script>
</body>
</html>
